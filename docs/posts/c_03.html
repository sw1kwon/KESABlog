<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="sw1kwon">
<meta name="dcterms.date" content="2025-05-24">

<title>3. 승강기 검사 결과 – KESA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-0626ff4d7a71b55c8707dcae1d04a9b6.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-3f453be5ec2ee49e579b43b94346acdb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">KESA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">3. 승강기 검사 결과</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>sw1kwon </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 24, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#승강기-검사-결과" id="toc-승강기-검사-결과" class="nav-link active" data-scroll-target="#승강기-검사-결과">승강기 검사 결과</a></li>
  <li><a href="#data-확인" id="toc-data-확인" class="nav-link" data-scroll-target="#data-확인">1. Data 확인</a>
  <ul class="collapse">
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data">Load Data</a></li>
  <li><a href="#데이터-구조-확인" id="toc-데이터-구조-확인" class="nav-link" data-scroll-target="#데이터-구조-확인">데이터 구조 확인</a></li>
  </ul></li>
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda">2. EDA</a>
  <ul class="collapse">
  <li><a href="#결측치-각-column의-결측값-비율" id="toc-결측치-각-column의-결측값-비율" class="nav-link" data-scroll-target="#결측치-각-column의-결측값-비율">1. (결측치) 각 column의 결측값 비율</a></li>
  <li><a href="#이상치-각-column별-이상치-확인" id="toc-이상치-각-column별-이상치-확인" class="nav-link" data-scroll-target="#이상치-각-column별-이상치-확인">2. (이상치) 각 column별 이상치 확인</a></li>
  <li><a href="#unique-각-column의-unique값과-unique값별-빈도" id="toc-unique-각-column의-unique값과-unique값별-빈도" class="nav-link" data-scroll-target="#unique-각-column의-unique값과-unique값별-빈도">3. (unique) 각 column의 unique값과 unique값별 빈도</a>
  <ul class="collapse">
  <li><a href="#시계열-분석" id="toc-시계열-분석" class="nav-link" data-scroll-target="#시계열-분석">시계열 분석</a></li>
  <li><a href="#함수-1" id="toc-함수-1" class="nav-link" data-scroll-target="#함수-1">함수 1</a></li>
  <li><a href="#함수-2" id="toc-함수-2" class="nav-link" data-scroll-target="#함수-2">함수 2</a></li>
  <li><a href="#함수-3" id="toc-함수-3" class="nav-link" data-scroll-target="#함수-3">함수 3</a></li>
  <li><a href="#함수-4" id="toc-함수-4" class="nav-link" data-scroll-target="#함수-4">함수 4</a></li>
  <li><a href="#함수-5" id="toc-함수-5" class="nav-link" data-scroll-target="#함수-5">함수 5</a></li>
  </ul></li>
  <li><a href="#기술통계-각-column의-기술통계-평균값-최대값-최솟값-최빈값-분위수-등" id="toc-기술통계-각-column의-기술통계-평균값-최대값-최솟값-최빈값-분위수-등" class="nav-link" data-scroll-target="#기술통계-각-column의-기술통계-평균값-최대값-최솟값-최빈값-분위수-등">4. (기술통계) 각 column의 기술통계 (평균값, 최대값, 최솟값, 최빈값, 분위수 등)</a></li>
  <li><a href="#상관관계-상관관계-매트릭스" id="toc-상관관계-상관관계-매트릭스" class="nav-link" data-scroll-target="#상관관계-상관관계-매트릭스">5. (상관관계) 상관관계 매트릭스</a></li>
  <li><a href="#시각화-histogram-bar-graph-box-plot-등" id="toc-시각화-histogram-bar-graph-box-plot-등" class="nav-link" data-scroll-target="#시각화-histogram-bar-graph-box-plot-등">6. (시각화) histogram, bar graph, box plot 등</a></li>
  <li><a href="#교차표-범주형-변수-간의-관계" id="toc-교차표-범주형-변수-간의-관계" class="nav-link" data-scroll-target="#교차표-범주형-변수-간의-관계">7. (교차표) 범주형 변수 간의 관계</a>
  <ul class="collapse">
  <li><a href="#함수-1-1" id="toc-함수-1-1" class="nav-link" data-scroll-target="#함수-1-1">함수 1</a></li>
  <li><a href="#함수-2-1" id="toc-함수-2-1" class="nav-link" data-scroll-target="#함수-2-1">함수 2</a></li>
  <li><a href="#함수-3-1" id="toc-함수-3-1" class="nav-link" data-scroll-target="#함수-3-1">함수 3</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-전처리" id="toc-data-전처리" class="nav-link" data-scroll-target="#data-전처리">3. Data 전처리</a>
  <ul class="collapse">
  <li><a href="#결측치-처리" id="toc-결측치-처리" class="nav-link" data-scroll-target="#결측치-처리">1. 결측치 처리</a></li>
  <li><a href="#이상치-처리" id="toc-이상치-처리" class="nav-link" data-scroll-target="#이상치-처리">2. 이상치 처리</a></li>
  <li><a href="#동일값-처리" id="toc-동일값-처리" class="nav-link" data-scroll-target="#동일값-처리">3. 동일값 처리</a></li>
  </ul></li>
  <li><a href="#참고-자료" id="toc-참고-자료" class="nav-link" data-scroll-target="#참고-자료">참고 자료</a>
  <ul class="collapse">
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section">1.</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1">2.</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="승강기-검사-결과" class="level1">
<h1>승강기 검사 결과</h1>
<pre><code>한국승강기안전공단_승강기 검사 결과

한국승강기안전공단에서는 승강기 관련 종합정보전산망을 구축하여 승강기에 대한 종합정보와 사고 등의 각종 이력관리 및 승강기관련 각종 통계자료를 제공하고 있습니다.

https://www.data.go.kr/data/15112639/fileData.do</code></pre>
</section>
<section id="data-확인" class="level1">
<h1>1. Data 확인</h1>
<div id="d92a5ade-20f0-4266-a465-2239122df33d" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="load-data" class="level2">
<h2 class="anchored" data-anchor-id="load-data">Load Data</h2>
<div id="196c2dec-6f33-4a6a-b27b-3032f342bc16" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/sw1kwon/KESA/refs/heads/main/data/c_03.csv"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="84f05324-9fb9-42c9-bb9c-dabc393ef7df" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">검사결과이력조회코드</th>
<th data-quarto-table-cell-role="th">검사일자</th>
<th data-quarto-table-cell-role="th">검사종류</th>
<th data-quarto-table-cell-role="th">검사차수</th>
<th data-quarto-table-cell-role="th">검사결과</th>
<th data-quarto-table-cell-role="th">검사기관</th>
<th data-quarto-table-cell-role="th">검사당시승강기구분</th>
<th data-quarto-table-cell-role="th">검사당시승강기형식</th>
<th data-quarto-table-cell-role="th">승강기세부형식</th>
<th data-quarto-table-cell-role="th">검사당시승강기종류</th>
<th data-quarto-table-cell-role="th">설치수시구분</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>4300001</td>
<td>2024-08-23</td>
<td>정기</td>
<td>1</td>
<td>합격</td>
<td>한국승강기안전공단 서울서부지사</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>승객용</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>8500001</td>
<td>2024-09-05</td>
<td>정기</td>
<td>1</td>
<td>조건부합격(1개월/서류검사)</td>
<td>(재)승강기안전기술연구원 서울지원</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>화물용</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>8500001</td>
<td>2024-09-24</td>
<td>정기</td>
<td>2</td>
<td>조건후합격</td>
<td>(재)승강기안전기술연구원 서울지원</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>화물용</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10000015</td>
<td>2024-12-13</td>
<td>정기</td>
<td>1</td>
<td>합격</td>
<td>한국승강기안전공단 서울동부지사</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>승객용</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>10000029</td>
<td>2024-08-06</td>
<td>정밀</td>
<td>1</td>
<td>합격</td>
<td>한국승강기안전공단 서울동부지사</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>승객용</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="데이터-구조-확인" class="level2">
<h2 class="anchored" data-anchor-id="데이터-구조-확인">데이터 구조 확인</h2>
<div id="49a1824d-1d36-4d32-bef2-f8c48f51771a" class="cell" data-outputid="13d5330a-017a-4090-d6a7-b69de6265d2a" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>(634630, 11)</code></pre>
</div>
</div>
<div id="f8b233b4-d01e-494a-a921-3342b1b3cc62" class="cell" data-outputid="bcc5790b-7090-42f0-caa6-10de3a987301" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 구조 파악</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># object 문자형</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># int/float 수치형</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 634630 entries, 0 to 634629
Data columns (total 11 columns):
 #   Column      Non-Null Count   Dtype 
---  ------      --------------   ----- 
 0   검사결과이력조회코드  634630 non-null  int64 
 1   검사일자        634630 non-null  object
 2   검사종류        634630 non-null  object
 3   검사차수        634630 non-null  int64 
 4   검사결과        634630 non-null  object
 5   검사기관        634630 non-null  object
 6   검사당시승강기구분   634630 non-null  object
 7   검사당시승강기형식   634630 non-null  object
 8   승강기세부형식     608851 non-null  object
 9   검사당시승강기종류   634630 non-null  object
 10  설치수시구분      51038 non-null   object
dtypes: int64(2), object(9)
memory usage: 53.3+ MB</code></pre>
</div>
</div>
<ul>
<li>‘승강기세부형식’, ’설치수시구분’을 제외한 모든 변수에 Null 값이 없음</li>
<li>’설치수시구분’은 Null 값이 많아보임</li>
</ul>
<div id="9affb02e-6195-4ffa-9220-dbb3262ba9f7" class="cell" data-outputid="f14b77fb-21c3-435e-a4c3-d2e834119099" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 문자형(범주형) 데이터 확인</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df.describe(include<span class="op">=</span>[<span class="st">'object'</span>]).T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">unique</th>
<th data-quarto-table-cell-role="th">top</th>
<th data-quarto-table-cell-role="th">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">검사일자</td>
<td>634630</td>
<td>170</td>
<td>2024-09-11</td>
<td>6229</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">검사종류</td>
<td>634630</td>
<td>4</td>
<td>정기</td>
<td>512547</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">검사결과</td>
<td>634630</td>
<td>17</td>
<td>합격</td>
<td>241185</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">검사기관</td>
<td>634630</td>
<td>58</td>
<td>한국승강기안전공단 경기북부지사</td>
<td>25361</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">검사당시승강기구분</td>
<td>634630</td>
<td>7</td>
<td>엘리베이터</td>
<td>603263</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">검사당시승강기형식</td>
<td>634630</td>
<td>15</td>
<td>권상식</td>
<td>592885</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">승강기세부형식</td>
<td>608851</td>
<td>7</td>
<td>VVVF</td>
<td>591519</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">검사당시승강기종류</td>
<td>634630</td>
<td>35</td>
<td>승객용</td>
<td>219813</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">설치수시구분</td>
<td>51038</td>
<td>6</td>
<td>신규설치</td>
<td>21103</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li>나중에 검사일자를 시계열 데이터 형식으로 바꿔서 분석 (필요 시)</li>
<li>’검사당시승강기형식’과 ’승강기세부형식’에 모르는 용어가 많을 것 같음</li>
</ul>
<div id="8af2f987-e655-43f9-9e17-8150f34ef163" class="cell" data-outputid="17a02a7a-2e24-48a7-9521-b7460b29e29b" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 수치형 데이터 확인</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df.describe(include<span class="op">=</span>[<span class="st">'int64'</span>,<span class="st">'float64'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">검사결과이력조회코드</th>
<th data-quarto-table-cell-role="th">검사차수</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>6.346300e+05</td>
<td>634630.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>4.213546e+07</td>
<td>1.282875</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>1.873299e+07</td>
<td>0.450397</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>4.300001e+06</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>3.050155e+07</td>
<td>1.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.400182e+07</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>5.600694e+07</td>
<td>2.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>7.990011e+07</td>
<td>2.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="0f62cd95-efbd-4449-b6d5-8a32e12aebda" class="cell" data-outputid="17a02a7a-2e24-48a7-9521-b7460b29e29b" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df.describe(include='number') # 동일 결과 코드</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>검사차수는 1차 또는 2차</li>
</ul>
</section>
</section>
<section id="eda" class="level1">
<h1>2. EDA</h1>
<section id="결측치-각-column의-결측값-비율" class="level2">
<h2 class="anchored" data-anchor-id="결측치-각-column의-결측값-비율">1. (결측치) 각 column의 결측값 비율</h2>
<div id="48fad1eb-e18d-49d5-a97a-fd74ea65d152" class="cell" data-outputid="aa1b0f8b-ac1a-423f-a043-9d77bdaa5a2b" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 각 column의 결측값 비율 계산</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>missing_ratio <span class="op">=</span> df.isnull().mean()                  <span class="co"># 각 column의 결측값 비율 계산 (결측 개수 / 전체 row 수)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>missing_ratio <span class="op">=</span> missing_ratio.sort_values(ascending<span class="op">=</span><span class="va">False</span>)  <span class="co"># 결측 비율이 높은 순서대로 정렬</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>missing_ratio <span class="op">=</span> missing_ratio.reset_index()         <span class="co"># Series → DataFrame 변환 (인덱스 초기화)</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>missing_ratio.columns <span class="op">=</span> [<span class="st">'Column'</span>, <span class="st">'MissingRatio'</span>]</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(missing_ratio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Column  MissingRatio
0       설치수시구분      0.919578
1      승강기세부형식      0.040621
2   검사결과이력조회코드      0.000000
3         검사종류      0.000000
4         검사일자      0.000000
5         검사차수      0.000000
6         검사결과      0.000000
7    검사당시승강기구분      0.000000
8         검사기관      0.000000
9    검사당시승강기형식      0.000000
10   검사당시승강기종류      0.000000</code></pre>
</div>
</div>
<ul>
<li>나중에 두 변수의 결측치를 어떻게 해아할지 고민해봐야할 듯</li>
</ul>
</section>
<section id="이상치-각-column별-이상치-확인" class="level2">
<h2 class="anchored" data-anchor-id="이상치-각-column별-이상치-확인">2. (이상치) 각 column별 이상치 확인</h2>
<div id="e13618a3-3e50-479a-8379-dc7048a50cbd" class="cell" data-outputid="e5571af7-e803-41be-a308-e1000bf57ec3" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 수치형 변수만 추출</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'float64'</span>, <span class="st">'int64'</span>]).columns</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 이상치 비율 저장용 리스트</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>outlier_info <span class="op">=</span> []</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 각 수치형 column에 대해 이상치 비율 계산 (IQR 방식)</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> numeric_cols:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    Q1 <span class="op">=</span> df[col].quantile(<span class="fl">0.25</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    Q3 <span class="op">=</span> df[col].quantile(<span class="fl">0.75</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    lower <span class="op">=</span> Q1 <span class="op">-</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    upper <span class="op">=</span> Q3 <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    outliers <span class="op">=</span> ((df[col] <span class="op">&lt;</span> lower) <span class="op">|</span> (df[col] <span class="op">&gt;</span> upper)).<span class="bu">sum</span>()</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    outlier_ratio <span class="op">=</span> outliers <span class="op">/</span> df.shape[<span class="dv">0</span>]</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    outlier_info.append((col, outliers, outlier_ratio))</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 결과 DataFrame 정리</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>outlier_df <span class="op">=</span> pd.DataFrame(outlier_info, columns<span class="op">=</span>[<span class="st">'Column'</span>, <span class="st">'OutlierCount'</span>, <span class="st">'OutlierRatio'</span>])</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>outlier_df <span class="op">=</span> outlier_df.sort_values(by<span class="op">=</span><span class="st">'OutlierRatio'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(outlier_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Column  OutlierCount  OutlierRatio
0  검사결과이력조회코드             0           0.0
1        검사차수             0           0.0</code></pre>
</div>
</div>
<ul>
<li>별 의미는 없음</li>
</ul>
<div id="c2532ec1-7b1d-4869-998f-46149614e7bb" class="cell" data-outputid="487c5212-7ca8-4d73-cb9f-4f7a75b12fea" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # 이상치 비율이 높은 상위 n개 변수만 시각화</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import seaborn as sns</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># import matplotlib.pyplot as plt</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># # 이상치 비율 높은 상위 n개 변수만 선택</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># top_n = 5</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># top_outlier_cols = outlier_df.head(top_n)['Column']</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># # 박스플롯 시각화</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.figure(figsize=(12, 6))</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># for i, col in enumerate(top_outlier_cols, 1):</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.subplot(1, top_n, i)</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#     sns.boxplot(y=df[col])</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.title(col)</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.tight_layout()</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.show()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>이상치가 없어서 실행 X</li>
</ul>
<div id="1c8e5e1c-f1c6-436c-8f88-05e97f0b3f2c" class="cell" data-outputid="efb37e28-2f96-4829-b021-2089214eec9b" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # 개별 탐색 시 사용 가능한 함수 정의</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># def plot_box(col):</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     sns.boxplot(y=df[col])</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.title(f"Boxplot of {col}")</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.show()</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># # 예시 사용: plot_box('Column Name')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="unique-각-column의-unique값과-unique값별-빈도" class="level2">
<h2 class="anchored" data-anchor-id="unique-각-column의-unique값과-unique값별-빈도">3. (unique) 각 column의 unique값과 unique값별 빈도</h2>
<div id="f42e24c1-a504-401e-8cc4-0713a6b1053f" class="cell" data-outputid="488461f5-bb7c-483f-d2f2-6dc9852dcb8b" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # 전체 column 대상 (비율을 %로, 순서 유지)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for col in df.columns:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     print(f"=== {col} ===")</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     print("Unique count:", df[col].nunique())</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     # 빈도와 비율 계산 (NaN 포함, 고유값 순서 유지)</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#     value_counts = df[col].value_counts(dropna=False, sort=False)</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#     value_ratio = df[col].value_counts(normalize=True, dropna=False, sort=False) * 100  # 비율을 %</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">#     # 결합</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     summary_df = pd.DataFrame({</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">#         'Count': value_counts,</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">#         'Ratio (%)': value_ratio.round(2)</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">#     })</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co">#     print(summary_df)</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co">#     print("\n")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="382230fa-1d4a-4bbc-bac0-e63f388a3b31" class="cell" data-outputid="821e6b1a-ecbe-4d37-a99f-5935572c442f" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 범주형 변수만 대상</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>cat_cols <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'object'</span>]).columns</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cat_cols:</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"=== </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss"> ==="</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Unique count:"</span>, df[col].nunique())</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    value_counts <span class="op">=</span> df[col].value_counts(dropna<span class="op">=</span><span class="va">False</span>, sort<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    value_ratio <span class="op">=</span> df[col].value_counts(normalize<span class="op">=</span><span class="va">True</span>, dropna<span class="op">=</span><span class="va">False</span>, sort<span class="op">=</span><span class="va">False</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    summary_df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Count'</span>: value_counts,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Ratio (%)'</span>: value_ratio.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(summary_df)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== 검사일자 ===
Unique count: 170
            Count  Ratio (%)
검사일자                        
2024-08-23   4973       0.78
2024-09-05   5841       0.92
2024-09-24   5840       0.92
2024-12-13   4781       0.75
2024-08-06   5181       0.82
...           ...        ...
2024-12-07     22       0.00
2024-09-16      1       0.00
2024-12-25      1       0.00
2024-07-27     46       0.01
2024-12-15      1       0.00

[170 rows x 2 columns]


=== 검사종류 ===
Unique count: 4
       Count  Ratio (%)
검사종류                   
정기    512547      80.76
정밀     71045      11.19
수시     17853       2.81
설치     33185       5.23


=== 검사결과 ===
Unique count: 17
                     Count  Ratio (%)
검사결과                                 
합격                  241185      38.00
조건부합격(1개월/서류검사)      94751      14.93
조건후합격               167415      26.38
조건부합격(현장시정조치)        24570       3.87
조건부합격(1개월/현장검사)       2565       0.40
조건부합격(2개월/현장검사)       6467       1.02
불합격                   4171       0.66
조건부합격(차기안전검사)          602       0.09
조건부합격(2개월/서류검사)      72930      11.49
차기안전검사                3137       0.49
조건후불합격                2094       0.33
조건부합격(12개월이하/서류검사)     363       0.06
조건부합격(12개월이하/현장검사)     660       0.10
보완(현장검사)              6756       1.06
보완후합격                 6751       1.06
보완(서류검사)                89       0.01
보완후불합격                 124       0.02


=== 검사기관 ===
Unique count: 58
                    Count  Ratio (%)
검사기관                                
한국승강기안전공단 서울서부지사    12409       1.96
(재)승강기안전기술연구원 서울지원  23832       3.76
한국승강기안전공단 서울동부지사    12604       1.99
(재)한국승강기안전원 서울지원     1569       0.25
(재)승강기기술진흥원 서울본사       82       0.01
한국승강기안전공단 서울북부지사    13300       2.10
한국승강기안전공단 서울강동지사    16478       2.60
(재)승강기안전기술연구원 경기지원   8401       1.32
한국승강기안전공단 서울강남지사    10841       1.71
(재)한국승강기안전진흥원 서울지원   5220       0.82
한국승강기안전공단 서울서초지사    10915       1.72
한국승강기안전공단 서울남서지사    14543       2.29
(재)대한승강기안전재단 경기본원    8428       1.33
한국승강기안전공단 서울강서지사     8574       1.35
한국승강기안전공단 강원지사      17020       2.68
한국승강기안전공단 대전지사      18207       2.87
(재)대한승강기안전재단 대전지원    2501       0.39
한국승강기안전공단 세종지사      10212       1.61
(재)대한승강기안전재단 충남지원    3921       0.62
한국승강기안전공단 천안지사       8040       1.27
한국승강기안전공단 충남지사       9667       1.52
한국승강기안전공단 평택안성지사    13871       2.19
한국승강기안전공단 충북지사      17244       2.72
한국승강기안전공단 인천남부지사    17436       2.75
(재)승강기안전기술연구원 인천지원   2745       0.43
한국승강기안전공단 인천동부지사    13637       2.15
한국승강기안전공단 인천서부지사    14953       2.36
(재)한국승강기안전진흥원 인천지원   1421       0.22
한국승강기안전공단 고양파주지사    20136       3.17
(재)승강기기술진흥원 경기지사       93       0.01
한국승강기안전공단 안양지사      12574       1.98
한국승강기안전공단 안산지사      12764       2.01
한국승강기안전공단 수원지사      12356       1.95
한국승강기안전공단 용인지사      13289       2.09
한국승강기안전공단 화성오산지사    16866       2.66
(재)한국승강기안전진흥원 경기본원   6641       1.05
한국승강기안전공단 성남지사      16940       2.67
한국승강기안전공단 경기북부지사    25361       4.00
한국승강기안전공단 광주지사      10882       1.71
(재)한국승강기안전원 광주지원     4538       0.72
한국승강기안전공단 전남서부지사    11795       1.86
한국승강기안전공단 전남동부지사     9975       1.57
한국승강기안전공단 전북동부지사     8553       1.35
(재)한국승강기안전원 전북지원     1987       0.31
한국승강기안전공단 전북서부지사     6492       1.02
한국승강기안전공단 부산서부지사    16192       2.55
(재)한국승강기안전원 부산지원     3013       0.47
한국승강기안전공단 부산북부지사    11457       1.81
한국승강기안전공단 부산동부지사    10777       1.70
한국승강기안전공단 경남동부지사    12487       1.97
한국승강기안전공단 경남서부지사    14187       2.24
한국승강기안전공단 울산지사      13392       2.11
한국승강기안전공단 제주지사      11168       1.76
한국승강기안전공단 대구동부지사    15284       2.41
(재)승강기기술진흥원 대구지사       23       0.00
한국승강기안전공단 대구서부지사    14596       2.30
한국승강기안전공단 경북서부지사    12892       2.03
한국승강기안전공단 경북동부지사     9849       1.55


=== 검사당시승강기구분 ===
Unique count: 7
             Count  Ratio (%)
검사당시승강기구분                    
엘리베이터       603263      95.06
소형화물용엘리베이터    2992       0.47
에스컬레이터       21961       3.46
무빙워크          3818       0.60
휠체어리프트        2254       0.36
주택형엘리베이터       330       0.05
경사형엘리베이터        12       0.00


=== 검사당시승강기형식 ===
Unique count: 15
            Count  Ratio (%)
검사당시승강기형식                   
권상식        592885      93.42
유압식         14545       2.29
스텝식         21961       3.46
유압식           177       0.03
팔레트식         3789       0.60
가이드로프식        309       0.05
마찰견인식         130       0.02
포지티브식         202       0.03
로프현수식          86       0.01
스크류-너트식       492       0.08
체인현수식           2       0.00
벨트식            29       0.00
체인식             3       0.00
랙-피니언식          1       0.00
체인식            19       0.00


=== 승강기세부형식 ===
Unique count: 7
                Count  Ratio (%)
승강기세부형식                         
VVVF           591519      93.21
교류              15074       2.38
NaN             25779       4.06
수직형LIFT(4m이하)    1711       0.27
경사형LIFT           500       0.08
직류기어                3       0.00
수직형LIFT(4m초과)      43       0.01
직류무기어               1       0.00


=== 검사당시승강기종류 ===
Unique count: 35
               Count  Ratio (%)
검사당시승강기종류                      
승객용           219813      34.64
화물용            13184       2.08
소방구조용          28824       4.54
덤웨이터            2180       0.34
자동차용            7860       1.24
장애인용          153668      24.21
병원용             4326       0.68
에스컬레이터         21961       3.46
승객화물용           8621       1.36
전망용             4320       0.68
소방구조/장애인용     115436      18.19
장애/전망용          8818       1.39
소방구조/장애/승객화물   16956       2.67
장애/승객화물용       13121       2.07
소방구조/승객화물용      2197       0.35
화물용(DW)          812       0.13
무빙워크            3818       0.60
수직형휠체어리프트       1754       0.28
경사형휠체어리프트        500       0.08
주택엘리베이터          330       0.05
소방구조/장애/전망용       13       0.00
전망/병원용            66       0.01
장애/병원용          4427       0.70
화물/자동차용          120       0.02
소방구조/병원용         158       0.02
피난용               94       0.01
피난/장애용           992       0.16
장애/전망/병원용         78       0.01
소방구조/장애/병원용      113       0.02
승객용(장애인겸용)        11       0.00
피난/승객화물용           2       0.00
장애/승객화물/전망용        6       0.00
피난/장애/승객화물용       48       0.01
소방구조/전망용           2       0.00
피난/장애/병원용          1       0.00


=== 설치수시구분 ===
Unique count: 6
         Count  Ratio (%)
설치수시구분                   
NaN     583592      91.96
부분교체      5638       0.89
교체설치     12082       1.90
용도변경     11575       1.82
민원요청       639       0.10
신규설치     21103       3.33
사고수리         1       0.00

</code></pre>
</div>
</div>
<ul>
<li>‘검사종류’, ‘검사결과’, ’검사기관’은 나중에 사고 관련 데이터와 같이 분석해봐도 좋을 거 같음</li>
<li>모르는 용어가 많은 변수: ‘검사당시승강기 형식’, ‘승강기세부형식’</li>
<li>결측치가 많고 의미를 잘 모르겠는 변수: ‘설치수시구분’</li>
<li>’검사당시승강기형식’은 동일값 전처리가 필요해보임 (3.3 참고)</li>
</ul>
<section id="시계열-분석" class="level3">
<h3 class="anchored" data-anchor-id="시계열-분석">시계열 분석</h3>
<div id="40a67d1c-9a23-4508-8ee0-5524e82d894e" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df.copy()</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'검사일자'</span>] <span class="op">=</span> pd.to_datetime(df2[<span class="st">'검사일자'</span>]) <span class="co"># 형식 변환</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="66e19ad9-e3f9-46af-ba1d-fbd23be30bd9" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'연월'</span>] <span class="op">=</span> df2[<span class="st">'검사일자'</span>].dt.to_period(<span class="st">'M'</span>) <span class="co"># 연도-월 단위로 그룹화</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 연도/월/일 column 따로 만들기</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'연도'</span>] <span class="op">=</span> df2[<span class="st">'검사일자'</span>].dt.year</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'월'</span>] <span class="op">=</span> df2[<span class="st">'검사일자'</span>].dt.month</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'일'</span>] <span class="op">=</span> df2[<span class="st">'검사일자'</span>].dt.day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8829a1fa-d0f2-495f-8b06-6b58f624ce75" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">검사결과이력조회코드</th>
<th data-quarto-table-cell-role="th">검사일자</th>
<th data-quarto-table-cell-role="th">검사종류</th>
<th data-quarto-table-cell-role="th">검사차수</th>
<th data-quarto-table-cell-role="th">검사결과</th>
<th data-quarto-table-cell-role="th">검사기관</th>
<th data-quarto-table-cell-role="th">검사당시승강기구분</th>
<th data-quarto-table-cell-role="th">검사당시승강기형식</th>
<th data-quarto-table-cell-role="th">승강기세부형식</th>
<th data-quarto-table-cell-role="th">검사당시승강기종류</th>
<th data-quarto-table-cell-role="th">설치수시구분</th>
<th data-quarto-table-cell-role="th">연월</th>
<th data-quarto-table-cell-role="th">연도</th>
<th data-quarto-table-cell-role="th">월</th>
<th data-quarto-table-cell-role="th">일</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>4300001</td>
<td>2024-08-23</td>
<td>정기</td>
<td>1</td>
<td>합격</td>
<td>한국승강기안전공단 서울서부지사</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>승객용</td>
<td>NaN</td>
<td>2024-08</td>
<td>2024</td>
<td>8</td>
<td>23</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>8500001</td>
<td>2024-09-05</td>
<td>정기</td>
<td>1</td>
<td>조건부합격(1개월/서류검사)</td>
<td>(재)승강기안전기술연구원 서울지원</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>화물용</td>
<td>NaN</td>
<td>2024-09</td>
<td>2024</td>
<td>9</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>8500001</td>
<td>2024-09-24</td>
<td>정기</td>
<td>2</td>
<td>조건후합격</td>
<td>(재)승강기안전기술연구원 서울지원</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>화물용</td>
<td>NaN</td>
<td>2024-09</td>
<td>2024</td>
<td>9</td>
<td>24</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10000015</td>
<td>2024-12-13</td>
<td>정기</td>
<td>1</td>
<td>합격</td>
<td>한국승강기안전공단 서울동부지사</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>승객용</td>
<td>NaN</td>
<td>2024-12</td>
<td>2024</td>
<td>12</td>
<td>13</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>10000029</td>
<td>2024-08-06</td>
<td>정밀</td>
<td>1</td>
<td>합격</td>
<td>한국승강기안전공단 서울동부지사</td>
<td>엘리베이터</td>
<td>권상식</td>
<td>VVVF</td>
<td>승객용</td>
<td>NaN</td>
<td>2024-08</td>
<td>2024</td>
<td>8</td>
<td>6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="2dd197ca-ff8a-411b-8aae-ec2505a18388" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. 전체 날짜 범위 확인</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>start_date <span class="op">=</span> df2[<span class="st">'검사일자'</span>].<span class="bu">min</span>()</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>end_date <span class="op">=</span> df2[<span class="st">'검사일자'</span>].<span class="bu">max</span>()</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"데이터 기간: </span><span class="sc">{</span>start_date<span class="sc">.</span>date()<span class="sc">}</span><span class="ss"> ~ </span><span class="sc">{</span>end_date<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>데이터 기간: 2024-07-01 ~ 2024-12-31</code></pre>
</div>
</div>
<ul>
<li>데이터의 기간이 반년임</li>
<li>알고보니 주기성 과거 데이터가 2018년까지 있음</li>
<li>일단 이 데이터로 진행하고 추가로 주기성 과거 데이터를 불러와서 분석해야할 것 같음</li>
</ul>
<div id="fbe6bf63-179d-4bca-9628-89fe8e38576e" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>monthly_counts <span class="op">=</span> df2[<span class="st">'연월'</span>].value_counts().sort_index()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 연월별 검사 수 히스토그램 시각화</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>monthly_counts.plot(kind<span class="op">=</span><span class="st">'bar'</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'연-월별 검사 수'</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'연-월'</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'검사 수'</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-20-output-1.png" width="1142" height="470" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="함수-1" class="level3">
<h3 class="anchored" data-anchor-id="함수-1">함수 1</h3>
<div id="995c8c0d-a214-4720-9411-f3ce017e2035" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_top_institutions(df, date_col<span class="op">=</span><span class="st">'검사일자'</span>, group_col<span class="op">=</span><span class="st">'검사기관'</span>, top_n<span class="op">=</span><span class="dv">5</span>):</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. 날짜 열 datetime 변환</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    df[date_col] <span class="op">=</span> pd.to_datetime(df[date_col])</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'연월'</span>] <span class="op">=</span> df[date_col].dt.to_period(<span class="st">'M'</span>).astype(<span class="bu">str</span>)  <span class="co"># '2024-08' 형식 문자열</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. 검사기관별 전체 건수 기준 상위 N개 추출</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    top_insts <span class="op">=</span> df[group_col].value_counts().nlargest(top_n).index</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. 해당 기관만 필터링</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    filtered <span class="op">=</span> df[df[group_col].isin(top_insts)]</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. 연월별 count 집계 (검사기관 × 연월)</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    summary <span class="op">=</span> filtered.groupby([<span class="st">'연월'</span>, group_col]).size().reset_index(name<span class="op">=</span><span class="st">'건수'</span>)</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5. Plotly line plot (interactive)</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> px.line(summary,</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>                  x<span class="op">=</span><span class="st">'연월'</span>,</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>                  y<span class="op">=</span><span class="st">'건수'</span>,</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>                  color<span class="op">=</span>group_col,</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>                  markers<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>                  title<span class="op">=</span><span class="ss">f'상위 </span><span class="sc">{</span>top_n<span class="sc">}</span><span class="ss"> 검사기관의 월별 검사 건수'</span>,</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>                  labels<span class="op">=</span>{<span class="st">'연월'</span>: <span class="st">'연-월'</span>, <span class="st">'건수'</span>: <span class="st">'검사 수'</span>, group_col: <span class="st">'검사기관'</span>},</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>                  hover_data<span class="op">=</span>{<span class="st">'연월'</span>: <span class="va">True</span>, <span class="st">'건수'</span>: <span class="va">True</span>, group_col: <span class="va">True</span>}</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>        xaxis<span class="op">=</span><span class="bu">dict</span>(tickangle<span class="op">=</span><span class="dv">45</span>),</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>        hovermode<span class="op">=</span><span class="st">'x unified'</span>,</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>        width<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>        height<span class="op">=</span><span class="dv">500</span></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="55da218c-6547-4881-b030-0d2337d81ba5" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>plot_top_institutions(df, top_n<span class="op">=</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
        <script type="text/javascript">
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
        </script>
        <script type="module">import "https://cdn.plot.ly/plotly-3.0.1.min"</script>
        
</div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="8f5c49a3-8024-4ba6-b0e8-9f9bc59ccfc1" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("8f5c49a3-8024-4ba6-b0e8-9f9bc59ccfc1")) {                    Plotly.newPlot(                        "8f5c49a3-8024-4ba6-b0e8-9f9bc59ccfc1",                        [{"customdata":[["(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0"],["(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0"],["(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0"],["(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0"],["(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0"],["(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0"]],"hovertemplate":"\uac80\uc0ac\uae30\uad00=%{customdata[0]}\u003cbr\u003e\uc5f0-\uc6d4=%{x}\u003cbr\u003e\uac80\uc0ac \uc218=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","orientation":"v","showlegend":true,"x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"xaxis":"x","y":{"dtype":"i2","bdata":"2g9gEkMSDg3QD70L"},"yaxis":"y","type":"scatter"},{"customdata":[["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac"]],"hovertemplate":"\uac80\uc0ac\uae30\uad00=%{customdata[0]}\u003cbr\u003e\uc5f0-\uc6d4=%{x}\u003cbr\u003e\uac80\uc0ac \uc218=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac","orientation":"v","showlegend":true,"x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"xaxis":"x","y":{"dtype":"i2","bdata":"EQvfCbsJDgurDBgM"},"yaxis":"y","type":"scatter"},{"customdata":[["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac"]],"hovertemplate":"\uac80\uc0ac\uae30\uad00=%{customdata[0]}\u003cbr\u003e\uc5f0-\uc6d4=%{x}\u003cbr\u003e\uac80\uc0ac \uc218=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac","orientation":"v","showlegend":true,"x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"xaxis":"x","y":{"dtype":"i2","bdata":"GxH6D9gOEBAFEg8R"},"yaxis":"y","type":"scatter"},{"customdata":[["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac"]],"hovertemplate":"\uac80\uc0ac\uae30\uad00=%{customdata[0]}\u003cbr\u003e\uc5f0-\uc6d4=%{x}\u003cbr\u003e\uac80\uc0ac \uc218=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac","orientation":"v","showlegend":true,"x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"xaxis":"x","y":{"dtype":"i2","bdata":"CQ07DKwLNg1lDh0O"},"yaxis":"y","type":"scatter"},{"customdata":[["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac"]],"hovertemplate":"\uac80\uc0ac\uae30\uad00=%{customdata[0]}\u003cbr\u003e\uc5f0-\uc6d4=%{x}\u003cbr\u003e\uac80\uc0ac \uc218=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac","orientation":"v","showlegend":true,"x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"xaxis":"x","y":{"dtype":"i2","bdata":"YQxRC4gKKQsADrwL"},"yaxis":"y","type":"scatter"},{"customdata":[["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac"]],"hovertemplate":"\uac80\uc0ac\uae30\uad00=%{customdata[0]}\u003cbr\u003e\uc5f0-\uc6d4=%{x}\u003cbr\u003e\uac80\uc0ac \uc218=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac","line":{"color":"#19d3f3","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac","orientation":"v","showlegend":true,"x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"xaxis":"x","y":{"dtype":"i2","bdata":"4QuVCmsK4AqADNsL"},"yaxis":"y","type":"scatter"},{"customdata":[["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac"],["\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac"]],"hovertemplate":"\uac80\uc0ac\uae30\uad00=%{customdata[0]}\u003cbr\u003e\uc5f0-\uc6d4=%{x}\u003cbr\u003e\uac80\uc0ac \uc218=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac","line":{"color":"#FF6692","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac","orientation":"v","showlegend":true,"x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"xaxis":"x","y":{"dtype":"i2","bdata":"dwxOC0kKBgvnC2EK"},"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"\uc5f0-\uc6d4"},"tickangle":45},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"\uac80\uc0ac \uc218"}},"legend":{"title":{"text":"\uac80\uc0ac\uae30\uad00"},"tracegroupgap":0},"title":{"text":"\uc0c1\uc704 7 \uac80\uc0ac\uae30\uad00\uc758 \uc6d4\ubcc4 \uac80\uc0ac \uac74\uc218"},"hovermode":"x unified","width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('8f5c49a3-8024-4ba6-b0e8-9f9bc59ccfc1');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<ul>
<li>’(재)승강기안전기술연구원 서울지원’의 추세가 다른 검사기관들과 비교됨</li>
</ul>
</section>
<section id="함수-2" class="level3">
<h3 class="anchored" data-anchor-id="함수-2">함수 2</h3>
<div id="04d51c98-9dbb-497f-bc2f-3933c21c3f52" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_top_institutions(df, date_col<span class="op">=</span><span class="st">'검사일자'</span>, group_col<span class="op">=</span><span class="st">'검사기관'</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>                          top_n<span class="op">=</span><span class="dv">5</span>, period_start<span class="op">=</span><span class="va">None</span>, period_end<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    df[date_col] <span class="op">=</span> pd.to_datetime(df[date_col])</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'연월'</span>] <span class="op">=</span> df[date_col].dt.to_period(<span class="st">'M'</span>).astype(<span class="bu">str</span>)  <span class="co"># '2024-08' 형식 유지</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> period_start:</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df[df[<span class="st">'연월'</span>] <span class="op">&gt;=</span> period_start]</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> period_end:</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df[df[<span class="st">'연월'</span>] <span class="op">&lt;=</span> period_end]</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 전체 건수 기준 상위 검사기관 추출</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    top_groups <span class="op">=</span> df[group_col].value_counts().nlargest(top_n)</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df[group_col].isin(top_groups.index)]</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 월별 건수 요약</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    summary <span class="op">=</span> df.groupby([<span class="st">'연월'</span>, group_col]).size().reset_index(name<span class="op">=</span><span class="st">'건수'</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 그래프 생성</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> group <span class="kw">in</span> top_groups.index:</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>        sub_df <span class="op">=</span> summary[summary[group_col] <span class="op">==</span> group]</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(go.Scatter(</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span>sub_df[<span class="st">'연월'</span>],</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span>sub_df[<span class="st">'건수'</span>],</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>            mode<span class="op">=</span><span class="st">'lines+markers'</span>,</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>            name<span class="op">=</span>group,</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>            hovertemplate<span class="op">=</span>(</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f'&lt;b&gt;검사기관: </span><span class="sc">{</span>group<span class="sc">}</span><span class="ss">&lt;/b&gt;&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>                <span class="st">'연월: %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;검사 수: %</span><span class="sc">{y}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f'상위 </span><span class="sc">{</span>top_n<span class="sc">}</span><span class="ss"> 검사기관의 월별 검사 건수'</span>,</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>        xaxis_title<span class="op">=</span><span class="st">'연월'</span>,</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>        yaxis_title<span class="op">=</span><span class="st">'검사 수'</span>,</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>        xaxis_tickangle<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>        xaxis<span class="op">=</span><span class="bu">dict</span>(<span class="bu">type</span><span class="op">=</span><span class="st">'category'</span>),  <span class="co"># 날짜를 문자로 고정</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>        hovermode<span class="op">=</span><span class="st">'closest'</span>,</span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>        width<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>        height<span class="op">=</span><span class="dv">500</span></span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="7ad6873a-072d-4687-a5b7-5c369ec25554" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>plot_top_institutions(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    df,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    top_n<span class="op">=</span><span class="dv">7</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    period_start<span class="op">=</span><span class="st">'2024-07'</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    period_end<span class="op">=</span><span class="st">'2024-12'</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="d7e7f01e-752c-4d7a-bbac-082e047c1af7" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("d7e7f01e-752c-4d7a-bbac-082e047c1af7")) {                    Plotly.newPlot(                        "d7e7f01e-752c-4d7a-bbac-082e047c1af7",                        [{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"GxH6D9gOEBAFEg8R"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: (\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"2g9gEkMSDg3QD70L"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"CQ07DKwLNg1lDh0O"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"YQxRC4gKKQsADrwL"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"4QuVCmsK4AqADNsL"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"dwxOC0kKBgvnC2EK"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uac15\uc6d0\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"EQvfCbsJDgurDBgM"},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"title":{"text":"\uc5f0\uc6d4"},"tickangle":0,"type":"category"},"title":{"text":"\uc0c1\uc704 7 \uac80\uc0ac\uae30\uad00\uc758 \uc6d4\ubcc4 \uac80\uc0ac \uac74\uc218"},"yaxis":{"title":{"text":"\uac80\uc0ac \uc218"}},"hovermode":"closest","width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('d7e7f01e-752c-4d7a-bbac-082e047c1af7');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
</section>
<section id="함수-3" class="level3">
<h3 class="anchored" data-anchor-id="함수-3">함수 3</h3>
<div id="d102f8d0-2e17-41b4-8ab2-737af70305dd" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 개선된 함수: 원하는 기관 직접 지정 기능 포함</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_top_institutions(df, date_col<span class="op">=</span><span class="st">'검사일자'</span>, group_col<span class="op">=</span><span class="st">'검사기관'</span>,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                          top_n<span class="op">=</span><span class="dv">5</span>, target_institutions<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                          period_start<span class="op">=</span><span class="va">None</span>, period_end<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    df[date_col] <span class="op">=</span> pd.to_datetime(df[date_col])</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'연월'</span>] <span class="op">=</span> df[date_col].dt.to_period(<span class="st">'M'</span>).astype(<span class="bu">str</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. 기간 필터링</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> period_start:</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df[df[<span class="st">'연월'</span>] <span class="op">&gt;=</span> period_start]</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> period_end:</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df[df[<span class="st">'연월'</span>] <span class="op">&lt;=</span> period_end]</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. 기관 필터링</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> target_institutions <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>        target_list <span class="op">=</span> target_institutions</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>        target_list <span class="op">=</span> df[group_col].value_counts().nlargest(top_n).index.tolist()</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df[group_col].isin(target_list)]</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. 연월별 집계</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>    summary <span class="op">=</span> df.groupby([<span class="st">'연월'</span>, group_col]).size().reset_index(name<span class="op">=</span><span class="st">'건수'</span>)</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. 그래프 생성</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> group <span class="kw">in</span> target_list:</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>        sub_df <span class="op">=</span> summary[summary[group_col] <span class="op">==</span> group]</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(go.Scatter(</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span>sub_df[<span class="st">'연월'</span>],</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span>sub_df[<span class="st">'건수'</span>],</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>            mode<span class="op">=</span><span class="st">'lines+markers'</span>,</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>            name<span class="op">=</span>group,</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>            hovertemplate<span class="op">=</span>(</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f'&lt;b&gt;검사기관: </span><span class="sc">{</span>group<span class="sc">}</span><span class="ss">&lt;/b&gt;&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>                <span class="st">'연월: %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;검사 수: %</span><span class="sc">{y}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f'</span><span class="sc">{</span><span class="st">"사용자 지정"</span> <span class="cf">if</span> target_institutions <span class="cf">else</span> <span class="ss">f"상위 </span><span class="sc">{</span>top_n<span class="sc">}</span><span class="ss">"</span><span class="sc">}</span><span class="ss"> 검사기관의 월별 검사 건수'</span>,</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>        xaxis_title<span class="op">=</span><span class="st">'연월'</span>,</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>        yaxis_title<span class="op">=</span><span class="st">'검사 수'</span>,</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>        xaxis_tickangle<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>        xaxis<span class="op">=</span><span class="bu">dict</span>(<span class="bu">type</span><span class="op">=</span><span class="st">'category'</span>),</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>        hovermode<span class="op">=</span><span class="st">'closest'</span>,</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>        width<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>        height<span class="op">=</span><span class="dv">500</span></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ba6854fb-2d37-457c-8286-7ee7bcf9444f" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시 1</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>plot_top_institutions(</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    df,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    target_institutions<span class="op">=</span>[</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'(재)승강기안전기술연구원 서울지원'</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'한국승강기안전공단 경기북부지사'</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    period_start<span class="op">=</span><span class="st">'2024-08'</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    period_end<span class="op">=</span><span class="st">'2024-12'</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="dc62767d-f4f8-4e58-96dd-d8a4df824c96" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("dc62767d-f4f8-4e58-96dd-d8a4df824c96")) {                    Plotly.newPlot(                        "dc62767d-f4f8-4e58-96dd-d8a4df824c96",                        [{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: (\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","x":["2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"YBJDEg4N0A+9Cw=="},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac","x":["2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"+g\u002fYDhAQBRIPEQ=="},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"title":{"text":"\uc5f0\uc6d4"},"tickangle":0,"type":"category"},"title":{"text":"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uac80\uc0ac\uae30\uad00\uc758 \uc6d4\ubcc4 \uac80\uc0ac \uac74\uc218"},"yaxis":{"title":{"text":"\uac80\uc0ac \uc218"}},"hovermode":"closest","width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('dc62767d-f4f8-4e58-96dd-d8a4df824c96');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<div id="c8393bcb-6775-4d9a-aaa1-d163f94bb6f9" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시 2</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>plot_top_institutions(df, top_n<span class="op">=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="2df5a6d1-8210-4ee1-a364-2347a3072516" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("2df5a6d1-8210-4ee1-a364-2347a3072516")) {                    Plotly.newPlot(                        "2df5a6d1-8210-4ee1-a364-2347a3072516",                        [{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"GxH6D9gOEBAFEg8R"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: (\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"2g9gEkMSDg3QD70L"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"CQ07DKwLNg1lDh0O"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"YQxRC4gKKQsADrwL"},"type":"scatter"},{"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc5f0\uc6d4: %{x}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc778\ucc9c\ub0a8\ubd80\uc9c0\uc0ac","x":["2024-07","2024-08","2024-09","2024-10","2024-11","2024-12"],"y":{"dtype":"i2","bdata":"4QuVCmsK4AqADNsL"},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"title":{"text":"\uc5f0\uc6d4"},"tickangle":0,"type":"category"},"title":{"text":"\uc0c1\uc704 5 \uac80\uc0ac\uae30\uad00\uc758 \uc6d4\ubcc4 \uac80\uc0ac \uac74\uc218"},"yaxis":{"title":{"text":"\uac80\uc0ac \uc218"}},"hovermode":"closest","width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2df5a6d1-8210-4ee1-a364-2347a3072516');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
</section>
<section id="함수-4" class="level3">
<h3 class="anchored" data-anchor-id="함수-4">함수 4</h3>
<div id="58db0b96-18a5-4ca1-adea-2d35e2b85ba5" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 함수: 특정 월의 일자별 검사 건수 시각화</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_daily_by_institution(df, year_month, date_col<span class="op">=</span><span class="st">'검사일자'</span>, group_col<span class="op">=</span><span class="st">'검사기관'</span>, top_n<span class="op">=</span><span class="dv">5</span>):</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    df[date_col] <span class="op">=</span> pd.to_datetime(df[date_col])</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'연월'</span>] <span class="op">=</span> df[date_col].dt.to_period(<span class="st">'M'</span>).astype(<span class="bu">str</span>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. 해당 연월 필터링</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df[<span class="st">'연월'</span>] <span class="op">==</span> year_month]</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. 전체 건수 기준 상위 검사기관 추출</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    top_groups <span class="op">=</span> df[group_col].value_counts().nlargest(top_n).index</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df[group_col].isin(top_groups)]</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. 일자 및 요일 생성</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'일자'</span>] <span class="op">=</span> df[date_col].dt.date</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'요일'</span>] <span class="op">=</span> df[date_col].dt.day_name()  <span class="co"># Monday, Tuesday, ...</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. 요약 테이블</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>    summary <span class="op">=</span> df.groupby([<span class="st">'일자'</span>, <span class="st">'요일'</span>, group_col]).size().reset_index(name<span class="op">=</span><span class="st">'건수'</span>)</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5. 그래프 생성</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> group <span class="kw">in</span> top_groups:</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>        sub_df <span class="op">=</span> summary[summary[group_col] <span class="op">==</span> group]</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(go.Scatter(</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span>sub_df[<span class="st">'일자'</span>].astype(<span class="bu">str</span>),</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span>sub_df[<span class="st">'건수'</span>],</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>            mode<span class="op">=</span><span class="st">'lines+markers'</span>,</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>            name<span class="op">=</span>group,</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>            customdata<span class="op">=</span>sub_df[[<span class="st">'요일'</span>]],</span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>            hovertemplate<span class="op">=</span>(</span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f'&lt;b&gt;검사기관: </span><span class="sc">{</span>group<span class="sc">}</span><span class="ss">&lt;/b&gt;&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>                <span class="st">'일자: %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>                <span class="st">'요일: %</span><span class="sc">{customdata[0]}</span><span class="st">&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>                <span class="st">'검사 수: %</span><span class="sc">{y}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f'</span><span class="sc">{</span>year_month<span class="sc">}</span><span class="ss"> 일자별 검사 건수 (상위 </span><span class="sc">{</span>top_n<span class="sc">}</span><span class="ss"> 기관)'</span>,</span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>        xaxis_title<span class="op">=</span><span class="st">'일자'</span>,</span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>        yaxis_title<span class="op">=</span><span class="st">'검사 수'</span>,</span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>        xaxis_tickangle<span class="op">=</span><span class="dv">45</span>,</span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>        xaxis<span class="op">=</span><span class="bu">dict</span>(<span class="bu">type</span><span class="op">=</span><span class="st">'category'</span>),</span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a>        hovermode<span class="op">=</span><span class="st">'closest'</span>,</span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>        width<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>        height<span class="op">=</span><span class="dv">500</span></span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-52"><a href="#cb34-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-53"><a href="#cb34-53" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="5769ca79-41d5-484a-a9af-fee2cf061f58" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>plot_daily_by_institution(df, <span class="st">'2024-08'</span>, top_n<span class="op">=</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="290ebfcc-ed47-499a-80bc-10f0e77d052e" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("290ebfcc-ed47-499a-80bc-10f0e77d052e")) {                    Plotly.newPlot(                        "290ebfcc-ed47-499a-80bc-10f0e77d052e",                        [{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Saturday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Sunday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: (\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-10","2024-08-12","2024-08-13","2024-08-14","2024-08-15","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-25","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"2wC2AKoA2gDvAO0A8QAEAOEADAHkAAEAawDeAPcA\u002fgDyANMAAgDcAAgB5gATAcYA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"ogB+ALcAtgAHAQABvwDxAMUA2wBCAMMA4wDFAMgAsAC9ANQAugDbAMsA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"lQBdAHIAiwB6AKkAkADkAIkAjQB9AKAAfQCYAKQAhgCgAKMAzgC1AH0A"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ud654\uc131\uc624\uc0b0\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ud654\uc131\uc624\uc0b0\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"ZgCmAIQAowCJAH8AfAB0AL4AbQBxAIYAfQCeAIsA0QCMAHIAjACRAJoA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"nwBzAH4AlwCOAJAAegCjAJAAhQBQAJEAhAClAJwApgB6AG8AfQCRAJcA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ucda9\ubd81\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"kQByAIAAfQCEAJ8AjACGAI0AkgAvAJUAjACIAJYAiQCCAKIAkQDLAIMA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc131\ub0a8\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc131\ub0a8\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"eQCIAH8AaQBoAJAAuwBpAGsAogA9AJEAcwB\u002fAKgAywCoAIEApACGAKcA"},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"title":{"text":"\uc77c\uc790"},"tickangle":45,"type":"category"},"title":{"text":"2024-08 \uc77c\uc790\ubcc4 \uac80\uc0ac \uac74\uc218 (\uc0c1\uc704 7 \uae30\uad00)"},"yaxis":{"title":{"text":"\uac80\uc0ac \uc218"}},"hovermode":"closest","width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('290ebfcc-ed47-499a-80bc-10f0e77d052e');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
</section>
<section id="함수-5" class="level3">
<h3 class="anchored" data-anchor-id="함수-5">함수 5</h3>
<div id="b2ce736d-c5d9-465a-a7b5-0439ad05a098" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 개선된 함수: 원하는 기관 직접 지정 기능 포함</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_daily_by_institution(df, year_month, date_col<span class="op">=</span><span class="st">'검사일자'</span>, group_col<span class="op">=</span><span class="st">'검사기관'</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>                              top_n<span class="op">=</span><span class="dv">5</span>, target_institutions<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    df[date_col] <span class="op">=</span> pd.to_datetime(df[date_col])</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'연월'</span>] <span class="op">=</span> df[date_col].dt.to_period(<span class="st">'M'</span>).astype(<span class="bu">str</span>)</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 1. 해당 월만 필터링</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df[<span class="st">'연월'</span>] <span class="op">==</span> year_month]</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. 검사기관 지정</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> target_institutions <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>        target_list <span class="op">=</span> target_institutions</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>        target_list <span class="op">=</span> df[group_col].value_counts().nlargest(top_n).index.tolist()</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df[group_col].isin(target_list)]</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. 일자 및 요일 추출</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'일자'</span>] <span class="op">=</span> df[date_col].dt.date</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'요일'</span>] <span class="op">=</span> df[date_col].dt.day_name()</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 4. 집계</span></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>    summary <span class="op">=</span> df.groupby([<span class="st">'일자'</span>, <span class="st">'요일'</span>, group_col]).size().reset_index(name<span class="op">=</span><span class="st">'건수'</span>)</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 5. 그래프 생성</span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> group <span class="kw">in</span> target_list:</span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>        sub_df <span class="op">=</span> summary[summary[group_col] <span class="op">==</span> group]</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(go.Scatter(</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span>sub_df[<span class="st">'일자'</span>].astype(<span class="bu">str</span>),</span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span>sub_df[<span class="st">'건수'</span>],</span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>            mode<span class="op">=</span><span class="st">'lines+markers'</span>,</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>            name<span class="op">=</span>group,</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>            customdata<span class="op">=</span>sub_df[[<span class="st">'요일'</span>]],</span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a>            hovertemplate<span class="op">=</span>(</span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f'&lt;b&gt;검사기관: </span><span class="sc">{</span>group<span class="sc">}</span><span class="ss">&lt;/b&gt;&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a>                <span class="st">'일자: %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a>                <span class="st">'요일: %</span><span class="sc">{customdata[0]}</span><span class="st">&lt;br&gt;'</span> <span class="op">+</span></span>
<span id="cb36-45"><a href="#cb36-45" aria-hidden="true" tabindex="-1"></a>                <span class="st">'검사 수: %</span><span class="sc">{y}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb36-46"><a href="#cb36-46" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb36-47"><a href="#cb36-47" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb36-48"><a href="#cb36-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-49"><a href="#cb36-49" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb36-50"><a href="#cb36-50" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f'</span><span class="sc">{</span>year_month<span class="sc">}</span><span class="ss"> 일자별 검사 건수 (</span><span class="sc">{</span> <span class="st">"사용자 지정"</span> <span class="cf">if</span> target_institutions <span class="cf">else</span> <span class="ss">f"상위 </span><span class="sc">{</span>top_n<span class="sc">}</span><span class="ss"> 기관"</span><span class="sc">}</span><span class="ss">)'</span>,</span>
<span id="cb36-51"><a href="#cb36-51" aria-hidden="true" tabindex="-1"></a>        xaxis_title<span class="op">=</span><span class="st">'일자'</span>,</span>
<span id="cb36-52"><a href="#cb36-52" aria-hidden="true" tabindex="-1"></a>        yaxis_title<span class="op">=</span><span class="st">'검사 수'</span>,</span>
<span id="cb36-53"><a href="#cb36-53" aria-hidden="true" tabindex="-1"></a>        xaxis_tickangle<span class="op">=</span><span class="dv">45</span>,</span>
<span id="cb36-54"><a href="#cb36-54" aria-hidden="true" tabindex="-1"></a>        xaxis<span class="op">=</span><span class="bu">dict</span>(<span class="bu">type</span><span class="op">=</span><span class="st">'category'</span>),</span>
<span id="cb36-55"><a href="#cb36-55" aria-hidden="true" tabindex="-1"></a>        hovermode<span class="op">=</span><span class="st">'closest'</span>,</span>
<span id="cb36-56"><a href="#cb36-56" aria-hidden="true" tabindex="-1"></a>        width<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb36-57"><a href="#cb36-57" aria-hidden="true" tabindex="-1"></a>        height<span class="op">=</span><span class="dv">500</span></span>
<span id="cb36-58"><a href="#cb36-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-59"><a href="#cb36-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-60"><a href="#cb36-60" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3245994c-4b6a-428d-bafd-38abb4d8e4b0" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시 1</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>plot_daily_by_institution(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    df,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    year_month<span class="op">=</span><span class="st">'2024-08'</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    target_institutions<span class="op">=</span>[<span class="st">'(재)승강기안전기술연구원 서울지원'</span>, <span class="st">'한국승강기안전공단 서울북부지사'</span>]</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="3c4d1530-924f-4dfc-8722-f15be10f8e98" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("3c4d1530-924f-4dfc-8722-f15be10f8e98")) {                    Plotly.newPlot(                        "3c4d1530-924f-4dfc-8722-f15be10f8e98",                        [{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Saturday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Sunday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: (\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-10","2024-08-12","2024-08-13","2024-08-14","2024-08-15","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-25","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"2wC2AKoA2gDvAO0A8QAEAOEADAHkAAEAawDeAPcA\u002fgDyANMAAgDcAAgB5gATAcYA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc11c\uc6b8\ubd81\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uc11c\uc6b8\ubd81\ubd80\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"bABjAKQAVACMAGEAbABOAKwAVwAtAHwAfgBrAGwAXQCMAG0AfgBbAKAA"},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"title":{"text":"\uc77c\uc790"},"tickangle":45,"type":"category"},"title":{"text":"2024-08 \uc77c\uc790\ubcc4 \uac80\uc0ac \uac74\uc218 (\uc0ac\uc6a9\uc790 \uc9c0\uc815)"},"yaxis":{"title":{"text":"\uac80\uc0ac \uc218"}},"hovermode":"closest","width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('3c4d1530-924f-4dfc-8722-f15be10f8e98');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
<div id="8acb0cf2-4c3d-49dc-bb79-7175bc881308" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시 2</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>plot_daily_by_institution(df, <span class="st">'2024-08'</span>, top_n<span class="op">=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="542978ab-f7cc-406f-9772-e6ca0008489b" class="plotly-graph-div" style="height:500px; width:1000px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("542978ab-f7cc-406f-9772-e6ca0008489b")) {                    Plotly.newPlot(                        "542978ab-f7cc-406f-9772-e6ca0008489b",                        [{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Saturday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Sunday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: (\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"(\uc7ac)\uc2b9\uac15\uae30\uc548\uc804\uae30\uc220\uc5f0\uad6c\uc6d0 \uc11c\uc6b8\uc9c0\uc6d0","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-10","2024-08-12","2024-08-13","2024-08-14","2024-08-15","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-25","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"2wC2AKoA2gDvAO0A8QAEAOEADAHkAAEAawDeAPcA\u002fgDyANMAAgDcAAgB5gATAcYA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uacbd\uae30\ubd81\ubd80\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"ogB+ALcAtgAHAQABvwDxAMUA2wBCAMMA4wDFAMgAsAC9ANQAugDbAMsA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \uace0\uc591\ud30c\uc8fc\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"lQBdAHIAiwB6AKkAkADkAIkAjQB9AKAAfQCYAKQAhgCgAKMAzgC1AH0A"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ud654\uc131\uc624\uc0b0\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ud654\uc131\uc624\uc0b0\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"ZgCmAIQAowCJAH8AfAB0AL4AbQBxAIYAfQCeAIsA0QCMAHIAjACRAJoA"},"type":"scatter"},{"customdata":[["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"],["Monday"],["Tuesday"],["Wednesday"],["Thursday"],["Friday"]],"hovertemplate":"\u003cb\u003e\uac80\uc0ac\uae30\uad00: \ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac\u003c\u002fb\u003e\u003cbr\u003e\uc77c\uc790: %{x}\u003cbr\u003e\uc694\uc77c: %{customdata[0]}\u003cbr\u003e\uac80\uc0ac \uc218: %{y}\u003cextra\u003e\u003c\u002fextra\u003e","mode":"lines+markers","name":"\ud55c\uad6d\uc2b9\uac15\uae30\uc548\uc804\uacf5\ub2e8 \ub300\uc804\uc9c0\uc0ac","x":["2024-08-01","2024-08-02","2024-08-05","2024-08-06","2024-08-07","2024-08-08","2024-08-09","2024-08-12","2024-08-13","2024-08-14","2024-08-16","2024-08-19","2024-08-20","2024-08-21","2024-08-22","2024-08-23","2024-08-26","2024-08-27","2024-08-28","2024-08-29","2024-08-30"],"y":{"dtype":"i2","bdata":"nwBzAH4AlwCOAJAAegCjAJAAhQBQAJEAhAClAJwApgB6AG8AfQCRAJcA"},"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"title":{"text":"\uc77c\uc790"},"tickangle":45,"type":"category"},"title":{"text":"2024-08 \uc77c\uc790\ubcc4 \uac80\uc0ac \uac74\uc218 (\uc0c1\uc704 5 \uae30\uad00)"},"yaxis":{"title":{"text":"\uac80\uc0ac \uc218"}},"hovermode":"closest","width":1000,"height":500},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('542978ab-f7cc-406f-9772-e6ca0008489b');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };            </script>        </div>
</div>
</div>
</section>
</section>
<section id="기술통계-각-column의-기술통계-평균값-최대값-최솟값-최빈값-분위수-등" class="level2">
<h2 class="anchored" data-anchor-id="기술통계-각-column의-기술통계-평균값-최대값-최솟값-최빈값-분위수-등">4. (기술통계) 각 column의 기술통계 (평균값, 최대값, 최솟값, 최빈값, 분위수 등)</h2>
<div id="9d1d6d27-66d0-450b-9f2d-954028534f27" class="cell" data-outputid="6cd41cab-3460-42c9-9045-4ddf8dc01d96" data-execution_count="32">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 수치형 변수만 선택</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'float64'</span>, <span class="st">'int64'</span>]).columns</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 통계 요약 저장용 리스트</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>stat_list <span class="op">=</span> []</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> numeric_cols:</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    desc <span class="op">=</span> df[col].describe()</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    mode <span class="op">=</span> df[col].mode(dropna<span class="op">=</span><span class="va">False</span>).values[<span class="dv">0</span>]  <span class="co"># 최빈값 (여러 개 중 첫 번째 선택)</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    mode_all <span class="op">=</span> df[col].mode(dropna<span class="op">=</span><span class="va">False</span>).tolist()  <span class="co"># 최빈값 리스트 형태로 저장</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    stat_list.append({</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Feature'</span>: col,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Count'</span>: desc[<span class="st">'count'</span>],</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Mean'</span>: desc[<span class="st">'mean'</span>],</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Std'</span>: desc[<span class="st">'std'</span>],</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Min'</span>: desc[<span class="st">'min'</span>],</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">'25%'</span>: desc[<span class="st">'25%'</span>],</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Median (50%)'</span>: desc[<span class="st">'50%'</span>],</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">'75%'</span>: desc[<span class="st">'75%'</span>],</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Max'</span>: desc[<span class="st">'max'</span>],</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Mode'</span>: mode,</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Mode_all'</span>: mode_all</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a><span class="co"># DataFrame으로 정리</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>stats_df <span class="op">=</span> pd.DataFrame(stat_list)</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>stats_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Feature</th>
<th data-quarto-table-cell-role="th">Count</th>
<th data-quarto-table-cell-role="th">Mean</th>
<th data-quarto-table-cell-role="th">Std</th>
<th data-quarto-table-cell-role="th">Min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">Median (50%)</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">Max</th>
<th data-quarto-table-cell-role="th">Mode</th>
<th data-quarto-table-cell-role="th">Mode_all</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>검사결과이력조회코드</td>
<td>634630.0</td>
<td>4.213546e+07</td>
<td>1.873299e+07</td>
<td>4300001.0</td>
<td>30501554.0</td>
<td>44001818.5</td>
<td>56006944.75</td>
<td>79900109.0</td>
<td>13408948</td>
<td>[13408948, 13409063, 15010874, 15712290, 15712...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>검사차수</td>
<td>634630.0</td>
<td>1.282875e+00</td>
<td>4.503966e-01</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>2.00</td>
<td>2.0</td>
<td>1</td>
<td>[1]</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="10bfac67-4f5d-4e25-97ca-b2ed3dbaf383" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>stats_df.loc[stats_df[<span class="st">'Feature'</span>] <span class="op">==</span> <span class="st">'검사결과이력조회코드'</span>, <span class="st">'Mode_all'</span>].values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>array([list([13408948, 13409063, 15010874, 15712290, 15712440, 15712441, 42901639, 42901640, 43005715, 70201335, 70201977])],
      dtype=object)</code></pre>
</div>
</div>
<div id="1b221ec0-b7b6-45da-94a2-a887a7131043" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>stats_df.loc[stats_df[<span class="st">'Feature'</span>] <span class="op">==</span> <span class="st">'검사결과이력조회코드'</span>, <span class="st">'Mode_all'</span>].values[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>[13408948,
 13409063,
 15010874,
 15712290,
 15712440,
 15712441,
 42901639,
 42901640,
 43005715,
 70201335,
 70201977]</code></pre>
</div>
</div>
<div id="1017da48-7a05-467a-a83d-2c10cc2fb549" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>stats_df.loc[stats_df[<span class="st">'Feature'</span>] <span class="op">==</span> <span class="st">'검사결과이력조회코드'</span>, <span class="st">'Mode_all'</span>].values[<span class="dv">0</span>][<span class="dv">0</span>] <span class="co"># 첫번째 원소만</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>13408948</code></pre>
</div>
</div>
</section>
<section id="상관관계-상관관계-매트릭스" class="level2">
<h2 class="anchored" data-anchor-id="상관관계-상관관계-매트릭스">5. (상관관계) 상관관계 매트릭스</h2>
<div id="eb49a93b-377f-4317-9666-0fc02be7e402" class="cell" data-outputid="572fce2a-69b0-474e-ec65-eff644efa171" data-execution_count="36">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 수치형 변수 간 상관관계 매트릭스</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 수치형 변수만 선택</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>numeric_df <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'float64'</span>, <span class="st">'int64'</span>])</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 상관계수 계산</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="op">=</span> numeric_df.corr()</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 시각화</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corr_matrix, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, fmt<span class="op">=</span><span class="st">".2f"</span>, square<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Numeric Feature Correlation Matrix"</span>)</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-37-output-1.png" width="848" height="758" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>당연히 두 변수는 상관 관계가 없음</li>
</ul>
</section>
<section id="시각화-histogram-bar-graph-box-plot-등" class="level2">
<h2 class="anchored" data-anchor-id="시각화-histogram-bar-graph-box-plot-등">6. (시각화) histogram, bar graph, box plot 등</h2>
<div id="fce1baa2-2f32-4156-8c8f-31e6b94200ef" class="cell" data-outputid="4de986e2-c4df-4e94-b9ec-64d758e47a34" data-execution_count="37">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'float64'</span>, <span class="st">'int64'</span>]).columns</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 전체 수치형 변수에 대해 히스토그램 그리기</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> numeric_cols:</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    plt.hist(df[col].dropna(), bins<span class="op">=</span><span class="dv">30</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Histogram of </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(col)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Frequency'</span>)</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-38-output-1.png" width="566" height="375" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-38-output-2.png" width="566" height="375" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>bins를 증가시키면</li>
</ul>
<div id="cdd0ad63-3b54-44e0-b67f-9349241064db" class="cell" data-outputid="4de986e2-c4df-4e94-b9ec-64d758e47a34" data-execution_count="38">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'float64'</span>, <span class="st">'int64'</span>]).columns</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 전체 수치형 변수에 대해 히스토그램 그리기</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> numeric_cols:</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    plt.hist(df[col].dropna(), bins<span class="op">=</span><span class="dv">60</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Histogram of </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(col)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Frequency'</span>)</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-39-output-1.png" width="566" height="375" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-39-output-2.png" width="566" height="375" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="ccec7a47-53e8-4fb1-adc3-350e3a6b0058" class="cell" data-outputid="c05bdd47-5a30-4b1b-d4f6-e8400315b95f" data-execution_count="39">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import seaborn as sns</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import matplotlib.pyplot as plt</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># cat_cols = df.select_dtypes(include=['object']).columns</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co"># # 전체 범주형 변수에 대해 히스토그램 그리기</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="co"># for col in cat_cols:</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.figure(figsize=(6, 4))</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="co">#     ax = sns.countplot(data=df, x=col, order=df[col].value_counts().index, color='salmon')</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     total = len(df)</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="co">#     for p in ax.patches:</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="co">#         count = int(p.get_height())</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="co">#         percent = 100 * count / total</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="co">#         label = f'{count} ({percent:.1f}%)'</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a><span class="co">#         # 텍스트 위치: 막대 안쪽 상단 (중앙 정렬)</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a><span class="co">#         ax.annotate(label,</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a><span class="co">#                     (p.get_x() + p.get_width() / 2., p.get_height() * 0.95),</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a><span class="co">#                     ha='center', va='top',</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a><span class="co">#                     fontsize=9, color='white', weight='bold')</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.title(f'Bar Graph of {col} (Count + Ratio)')</span></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.xticks(rotation=45)</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.tight_layout()</span></span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.show()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>의미가 없어서 실행 X (날짜 데이터를 제외하고 그려도 알아보기 어려움)</li>
</ul>
<div id="795c4502-3a87-4657-a379-f118d16228a2" class="cell" data-outputid="83e961f8-dea6-4630-9707-b62d4eea0a7d" data-execution_count="40">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">'float64'</span>, <span class="st">'int64'</span>]).columns</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 특정 변수에 따른 수치형 변수 분포 비교</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> numeric_cols:</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">'검사종류'</span>, y<span class="op">=</span>col)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Boxplot of </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss"> by 검사종류'</span>)</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-41-output-1.png" width="566" height="375" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="c_03_files/figure-html/cell-41-output-2.png" width="566" height="375" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>’검사종류’가 ’설치’이면 대부분 ’검사차수’가 1차?</li>
<li>’검사차수’는 값이 1 또는 2 뿐이라 상자그림이 큰 의미를 가지지 않음</li>
</ul>
<div id="4e3e1ae3-2e1f-42c1-a58d-73f99152f167" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # 특정 변수 중 특정 값들에 따른 수치형 변수들 분포 비교</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import seaborn as sns</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># import matplotlib.pyplot as plt</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># # 파라미터 설정</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># group_col = '검사종류'  # 비교할 범주형 변수</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># target_values = ['설치']  # 특정 값들</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co"># numeric_cols = ['검사차수']  # 수치형 변수 목록</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co"># # 필터링된 데이터프레임</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co"># filtered_df = df[df[group_col].isin(target_values)]</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="co"># # 반복해서 boxplot 그리기</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="co"># for col in numeric_cols:</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.figure(figsize=(6, 4))</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="co">#     sns.boxplot(data=filtered_df, x=group_col, y=col)</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.title(f'Boxplot of {col} by {group_col} ({", ".join(target_values)})')</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.tight_layout()</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.show()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6db0d9e3-10dd-4cb9-a4a0-24041aa7aff3" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 카테고리 + 수치형 변수 조합 분포표</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. 개수 집계</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>count_df <span class="op">=</span> df.groupby([<span class="st">'검사종류'</span>, <span class="st">'검사차수'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'Count'</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. 검사종류별 총합 기준 비율 계산</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>count_df[<span class="st">'비율 (%)'</span>] <span class="op">=</span> count_df.groupby(<span class="st">'검사종류'</span>)[<span class="st">'Count'</span>].transform(<span class="kw">lambda</span> x: (x <span class="op">/</span> x.<span class="bu">sum</span>()) <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. 확인</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(count_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  검사종류  검사차수   Count  비율 (%)
0   설치     1   26310   79.28
1   설치     2    6875   20.72
2   수시     1   11108   62.22
3   수시     2    6745   37.78
4   정기     1  368629   71.92
5   정기     2  143918   28.08
6   정밀     1   49062   69.06
7   정밀     2   21983   30.94</code></pre>
</div>
</div>
<ul>
<li>모든 검사종류에서 1차 검사가 약 60~80% 정도를 차지함
<ul>
<li>대부분의 검사는 1차에서 마무리된다는 시사점</li>
</ul></li>
<li>정기 검사는 Count가 월등히 높으므로 주된 검사 유형이라는 정량적 증거</li>
<li>수시 검사에서 2차 비율 37.78%는 상대적으로 다른 유형보다 2차 재검이 많은 것처럼 보임
<ul>
<li>수시검사는 1차에서 문제가 생겨 재검 비율이 높은 유형일 수 있음</li>
</ul></li>
<li>나중에 이 데이터를 이전의 승강기 검사 결과들과 합치고 사고 데이터와 같이 분석하면 좋을 것 같음</li>
</ul>
</section>
<section id="교차표-범주형-변수-간의-관계" class="level2">
<h2 class="anchored" data-anchor-id="교차표-범주형-변수-간의-관계">7. (교차표) 범주형 변수 간의 관계</h2>
<div id="61e4201a-ba77-4d1e-89b0-c596f8fdd41e" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># '검사종류'에 따른 '검사결과' 비율</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== 검사종류 vs 검사결과 ==="</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>ratio <span class="op">=</span> df.groupby(<span class="st">'검사종류'</span>)[<span class="st">'검사결과'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>).unstack()</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>ratio.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== 검사종류 vs 검사결과 ===</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">검사결과</th>
<th data-quarto-table-cell-role="th">보완(서류검사)</th>
<th data-quarto-table-cell-role="th">보완(현장검사)</th>
<th data-quarto-table-cell-role="th">보완후불합격</th>
<th data-quarto-table-cell-role="th">보완후합격</th>
<th data-quarto-table-cell-role="th">불합격</th>
<th data-quarto-table-cell-role="th">조건부합격(12개월이하/서류검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(12개월이하/현장검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(1개월/서류검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(1개월/현장검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(2개월/서류검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(2개월/현장검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(차기안전검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(현장시정조치)</th>
<th data-quarto-table-cell-role="th">조건후불합격</th>
<th data-quarto-table-cell-role="th">조건후합격</th>
<th data-quarto-table-cell-role="th">차기안전검사</th>
<th data-quarto-table-cell-role="th">합격</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">검사종류</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">설치</td>
<td>0.002682</td>
<td>0.203586</td>
<td>0.003737</td>
<td>0.203435</td>
<td>0.048486</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.538074</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">수시</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.021845</td>
<td>0.000056</td>
<td>0.000448</td>
<td>0.003529</td>
<td>0.119980</td>
<td>0.004033</td>
<td>0.247801</td>
<td>NaN</td>
<td>0.012267</td>
<td>0.004425</td>
<td>0.373159</td>
<td>0.000224</td>
<td>0.212233</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">정기</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.002950</td>
<td>0.000634</td>
<td>0.001155</td>
<td>0.171274</td>
<td>0.000611</td>
<td>0.113217</td>
<td>0.000496</td>
<td>0.000708</td>
<td>0.040597</td>
<td>0.000993</td>
<td>0.278800</td>
<td>0.000997</td>
<td>0.387568</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">정밀</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.009290</td>
<td>0.000521</td>
<td>0.000845</td>
<td>0.097150</td>
<td>0.001548</td>
<td>0.208727</td>
<td>0.025181</td>
<td>0.003364</td>
<td>0.049870</td>
<td>0.021198</td>
<td>0.251320</td>
<td>0.036906</td>
<td>0.294081</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li>각 <strong>검사종류</strong>별(기준축) 검사결과 비율</li>
<li>행 기준 해석: 이 검사종류에서 어떤 결과가 나왔는가?</li>
<li>사용 목적: 검사종류별 합격률/불합격률 등</li>
</ul>
<div id="003e5ae3-98af-4d8d-8c36-20aa94722344" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>pd.crosstab(df[<span class="st">'검사결과'</span>], df[<span class="st">'검사종류'</span>], normalize<span class="op">=</span><span class="st">'index'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">검사종류</th>
<th data-quarto-table-cell-role="th">설치</th>
<th data-quarto-table-cell-role="th">수시</th>
<th data-quarto-table-cell-role="th">정기</th>
<th data-quarto-table-cell-role="th">정밀</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">검사결과</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">보완(서류검사)</td>
<td>1.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">보완(현장검사)</td>
<td>1.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">보완후불합격</td>
<td>1.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">보완후합격</td>
<td>1.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">불합격</td>
<td>0.385759</td>
<td>0.093503</td>
<td>0.362503</td>
<td>0.158235</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">조건부합격(12개월이하/서류검사)</td>
<td>0.000000</td>
<td>0.002755</td>
<td>0.895317</td>
<td>0.101928</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">조건부합격(12개월이하/현장검사)</td>
<td>0.000000</td>
<td>0.012121</td>
<td>0.896970</td>
<td>0.090909</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">조건부합격(1개월/서류검사)</td>
<td>0.000000</td>
<td>0.000665</td>
<td>0.926492</td>
<td>0.072844</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">조건부합격(1개월/현장검사)</td>
<td>0.000000</td>
<td>0.835088</td>
<td>0.122027</td>
<td>0.042885</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">조건부합격(2개월/서류검사)</td>
<td>0.000000</td>
<td>0.000987</td>
<td>0.795681</td>
<td>0.203332</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">조건부합격(2개월/현장검사)</td>
<td>0.000000</td>
<td>0.684088</td>
<td>0.039276</td>
<td>0.276635</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">조건부합격(차기안전검사)</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.602990</td>
<td>0.397010</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">조건부합격(현장시정조치)</td>
<td>0.000000</td>
<td>0.008913</td>
<td>0.846886</td>
<td>0.144200</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">조건후불합격</td>
<td>0.000000</td>
<td>0.037727</td>
<td>0.243075</td>
<td>0.719198</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">조건후합격</td>
<td>0.000000</td>
<td>0.039793</td>
<td>0.853556</td>
<td>0.106651</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">차기안전검사</td>
<td>0.000000</td>
<td>0.001275</td>
<td>0.162894</td>
<td>0.835830</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">합격</td>
<td>0.074034</td>
<td>0.015710</td>
<td>0.823629</td>
<td>0.086626</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li>각 <strong>검사결과</strong>별(기준축) 검사종류 비율</li>
<li>행 기준 해석: 이 검사결과는 어떤 검사종류에서 나왔는가?</li>
<li>사용 목적: 특정 결과가 주로 어느 검사에서 발생하는지 등</li>
</ul>
<section id="함수-1-1" class="level3">
<h3 class="anchored" data-anchor-id="함수-1-1">함수 1</h3>
<div id="f108dd3e-e770-4ce7-8390-42b4cc35d6ef" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> grouped_ratio_table(df, group_col, target_col, normalize<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">    group_col 기준으로 target_col의 비율(또는 건수)을 cross-tab 형태로 반환</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co">    - df: DataFrame</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co">    - group_col: 그룹 기준 변수 (ex: '지역')</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co">    - target_col: 비율을 계산할 대상 변수 (ex: '승강기종류')</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co">    - normalize: True면 비율, False면 건수</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="co">    - DataFrame: 행 = group_col, 열 = target_col</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>    grouped <span class="op">=</span> (</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>        df.groupby(group_col)[target_col]</span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>        .value_counts(normalize<span class="op">=</span>normalize)</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>        .unstack()</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grouped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="c308f91c-3a57-409e-8e01-2a6fa3952932" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 비율 사용 예시</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== 검사당시승강기구분 vs 검사결과 비율 ==="</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>grouped_ratio_table(df, <span class="st">'검사당시승강기구분'</span>, <span class="st">'검사결과'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== 검사당시승강기구분 vs 검사결과 비율 ===</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="46">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">검사결과</th>
<th data-quarto-table-cell-role="th">보완(서류검사)</th>
<th data-quarto-table-cell-role="th">보완(현장검사)</th>
<th data-quarto-table-cell-role="th">보완후불합격</th>
<th data-quarto-table-cell-role="th">보완후합격</th>
<th data-quarto-table-cell-role="th">불합격</th>
<th data-quarto-table-cell-role="th">조건부합격(12개월이하/서류검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(12개월이하/현장검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(1개월/서류검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(1개월/현장검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(2개월/서류검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(2개월/현장검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(차기안전검사)</th>
<th data-quarto-table-cell-role="th">조건부합격(현장시정조치)</th>
<th data-quarto-table-cell-role="th">조건후불합격</th>
<th data-quarto-table-cell-role="th">조건후합격</th>
<th data-quarto-table-cell-role="th">차기안전검사</th>
<th data-quarto-table-cell-role="th">합격</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">검사당시승강기구분</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">경사형엘리베이터</td>
<td>NaN</td>
<td>0.083333</td>
<td>NaN</td>
<td>0.083333</td>
<td>0.166667</td>
<td>NaN</td>
<td>NaN</td>
<td>0.083333</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.166667</td>
<td>0.083333</td>
<td>0.083333</td>
<td>NaN</td>
<td>0.250000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">무빙워크</td>
<td>NaN</td>
<td>0.007334</td>
<td>NaN</td>
<td>0.006810</td>
<td>0.004976</td>
<td>0.018334</td>
<td>0.004191</td>
<td>0.129387</td>
<td>0.010739</td>
<td>0.061289</td>
<td>0.003667</td>
<td>0.002619</td>
<td>0.025668</td>
<td>0.005238</td>
<td>0.194081</td>
<td>0.032478</td>
<td>0.493190</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">소형화물용엘리베이터</td>
<td>NaN</td>
<td>0.003342</td>
<td>NaN</td>
<td>0.003008</td>
<td>0.020388</td>
<td>NaN</td>
<td>NaN</td>
<td>0.109960</td>
<td>0.003008</td>
<td>0.007687</td>
<td>0.001337</td>
<td>NaN</td>
<td>0.048463</td>
<td>0.001337</td>
<td>0.122326</td>
<td>NaN</td>
<td>0.679144</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">에스컬레이터</td>
<td>0.000182</td>
<td>0.019717</td>
<td>0.000182</td>
<td>0.018123</td>
<td>0.007650</td>
<td>0.001366</td>
<td>0.000683</td>
<td>0.155822</td>
<td>0.007513</td>
<td>0.033742</td>
<td>0.003279</td>
<td>0.001594</td>
<td>0.070124</td>
<td>0.002869</td>
<td>0.198124</td>
<td>0.003370</td>
<td>0.475661</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">엘리베이터</td>
<td>0.000134</td>
<td>0.010340</td>
<td>0.000177</td>
<td>0.010405</td>
<td>0.006355</td>
<td>0.000436</td>
<td>0.001043</td>
<td>0.149623</td>
<td>0.003891</td>
<td>0.119187</td>
<td>0.010569</td>
<td>0.000923</td>
<td>0.037640</td>
<td>0.003324</td>
<td>0.267978</td>
<td>0.004872</td>
<td>0.373103</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">주택형엘리베이터</td>
<td>0.006061</td>
<td>0.048485</td>
<td>0.003030</td>
<td>0.051515</td>
<td>0.018182</td>
<td>NaN</td>
<td>NaN</td>
<td>0.139394</td>
<td>0.003030</td>
<td>0.009091</td>
<td>0.003030</td>
<td>NaN</td>
<td>0.042424</td>
<td>0.003030</td>
<td>0.163636</td>
<td>NaN</td>
<td>0.509091</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">휠체어리프트</td>
<td>0.000887</td>
<td>0.013310</td>
<td>0.005324</td>
<td>0.010204</td>
<td>0.035936</td>
<td>NaN</td>
<td>NaN</td>
<td>0.087400</td>
<td>0.000887</td>
<td>0.012422</td>
<td>NaN</td>
<td>NaN</td>
<td>0.028394</td>
<td>NaN</td>
<td>0.106921</td>
<td>NaN</td>
<td>0.698314</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li>어떤 승강기 종류가 불합격률이 높은가 → 설계/유지관리 문제 포착 가능</li>
</ul>
<div id="572c2fdf-46ec-46fc-a7ee-5896facc18fd" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # 건수 사용 예시</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># print("=== 검사당시승강기구분 vs 검사결과 건수 ===")</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co"># grouped_ratio_table(df, '검사당시승강기구분', '검사결과', normalize=False)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="함수-2-1" class="level3">
<h3 class="anchored" data-anchor-id="함수-2-1">함수 2</h3>
<div id="def998e7-13fe-4777-a6b9-efeeb505dfe8" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filter_crosstab(df, group_col, target_col,</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>                    row_values<span class="op">=</span><span class="va">None</span>, col_values<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>                    normalize<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co">    전체 교차표 생성 후, 특정 행(row)/열(column)만 필터링</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co">    - df: 전체 DataFrame</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co">    - group_col: 행 기준 (예: '지역')</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">    - target_col: 열 기준 (예: '승강기종류')</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="co">    - row_values: group_col 중 보고 싶은 값 리스트</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="co">    - col_values: target_col 중 보고 싶은 값 리스트</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="co">    - normalize: True면 비율, False면 건수</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="co">    - 필터된 교차표 DataFrame</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> df.groupby(group_col)[target_col].value_counts(normalize<span class="op">=</span>normalize).unstack()</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> row_values <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>        table <span class="op">=</span> table.loc[table.index.intersection(row_values)]</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> col_values <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>        table <span class="op">=</span> table.loc[:, table.columns.intersection(col_values)]</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="af7dd63b-2293-429e-b752-eb12750095c0" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 비율 사용 예시</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>filter_crosstab(df,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>                group_col<span class="op">=</span><span class="st">'검사당시승강기종류'</span>,</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>                target_col<span class="op">=</span><span class="st">'검사결과'</span>,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>                row_values<span class="op">=</span>[<span class="st">'승객용'</span>, <span class="st">'화물용'</span>, <span class="st">'소방구조용'</span>, <span class="st">'장애인용'</span>, <span class="st">'에스컬레이터'</span>, <span class="st">'승객용(장애인겸용)'</span>],</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>                col_values<span class="op">=</span>[<span class="st">'합격'</span>, <span class="st">'조건부합격'</span>, <span class="st">'불합격'</span>, <span class="st">'보완후합격'</span>, <span class="st">'보완후불합격'</span>],</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>                normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">검사결과</th>
<th data-quarto-table-cell-role="th">보완후불합격</th>
<th data-quarto-table-cell-role="th">보완후합격</th>
<th data-quarto-table-cell-role="th">불합격</th>
<th data-quarto-table-cell-role="th">합격</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">검사당시승강기종류</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">소방구조용</td>
<td>NaN</td>
<td>0.004475</td>
<td>0.003088</td>
<td>0.312795</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">승객용</td>
<td>0.000127</td>
<td>0.011382</td>
<td>0.006246</td>
<td>0.415503</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">승객용(장애인겸용)</td>
<td>NaN</td>
<td>0.090909</td>
<td>0.090909</td>
<td>0.272727</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">에스컬레이터</td>
<td>0.000182</td>
<td>0.018123</td>
<td>0.007650</td>
<td>0.475661</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">장애인용</td>
<td>0.000345</td>
<td>0.015592</td>
<td>0.007523</td>
<td>0.394988</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">화물용</td>
<td>0.000152</td>
<td>0.018052</td>
<td>0.020252</td>
<td>0.376972</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="316a5c58-6f08-419c-83e3-86a994311277" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 건수 사용 예시</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>filter_crosstab(df,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>                group_col<span class="op">=</span><span class="st">'검사당시승강기종류'</span>,</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>                target_col<span class="op">=</span><span class="st">'검사결과'</span>,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>                row_values<span class="op">=</span>[<span class="st">'승객용'</span>, <span class="st">'화물용'</span>, <span class="st">'소방구조용'</span>, <span class="st">'장애인용'</span>, <span class="st">'에스컬레이터'</span>, <span class="st">'승객용(장애인겸용)'</span>],</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>                col_values<span class="op">=</span>[<span class="st">'합격'</span>, <span class="st">'조건부합격'</span>, <span class="st">'불합격'</span>, <span class="st">'보완후합격'</span>, <span class="st">'보완후불합격'</span>],</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>                normalize<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">검사결과</th>
<th data-quarto-table-cell-role="th">보완후불합격</th>
<th data-quarto-table-cell-role="th">보완후합격</th>
<th data-quarto-table-cell-role="th">불합격</th>
<th data-quarto-table-cell-role="th">합격</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">검사당시승강기종류</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">소방구조용</td>
<td>NaN</td>
<td>129.0</td>
<td>89.0</td>
<td>9016.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">승객용</td>
<td>28.0</td>
<td>2502.0</td>
<td>1373.0</td>
<td>91333.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">승객용(장애인겸용)</td>
<td>NaN</td>
<td>1.0</td>
<td>1.0</td>
<td>3.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">에스컬레이터</td>
<td>4.0</td>
<td>398.0</td>
<td>168.0</td>
<td>10446.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">장애인용</td>
<td>53.0</td>
<td>2396.0</td>
<td>1156.0</td>
<td>60697.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">화물용</td>
<td>2.0</td>
<td>238.0</td>
<td>267.0</td>
<td>4970.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="함수-3-1" class="level3">
<h3 class="anchored" data-anchor-id="함수-3-1">함수 3</h3>
<div id="3e541c1a-676b-407a-a89a-3f5312766994" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merged_ratio_count_table(df, group_col, target_col,</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>                              row_values<span class="op">=</span><span class="va">None</span>, col_values<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                              sort_mode<span class="op">=</span><span class="st">'suffix-first'</span>,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>                              order<span class="op">=</span>[<span class="st">'비율'</span>, <span class="st">'건수'</span>]):</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co">    비율 교차표와 건수 교차표를 병합하고 선택한 행/열만 필터링, 열 순서 정렬까지 하나의 함수로 처리</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co">    - df: DataFrame</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="co">    - group_col: 행 기준 변수 (예: '지역')</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="co">    - target_col: 열 기준 변수 (예: '승강기종류')</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="co">    - row_values: 선택할 행 인덱스 (None이면 전체)</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="co">    - col_values: 선택할 열 값 (None이면 전체)</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="co">    - sort_mode: 열 정렬 방식 - 'suffix-first' 또는 'prefix-first'</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="co">        - 'suffix-first': 항목별로 비율 → 건수 순서로 정렬  </span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="co">          예: ['승객용_비율', '승객용_건수', '화물용_비율', '화물용_건수']</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="co">        - 'prefix-first': 비율 열들을 모두 먼저, 그다음 건수 열들을 정렬  </span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a><span class="co">          예: ['승객용_비율', '화물용_비율', '승객용_건수', '화물용_건수']</span></span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a><span class="co">    - order: 접미사 순서 지정 (허용된 값만 가능: ['비율', '건수'] 또는 ['건수', '비율'])</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a><span class="co">    - 병합된 정렬된 교차표 DataFrame</span></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Step 0. order 유효성 검사 ===</span></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">set</span>(order) <span class="op">!=</span> {<span class="st">'비율'</span>, <span class="st">'건수'</span>} <span class="kw">or</span> <span class="bu">len</span>(order) <span class="op">!=</span> <span class="dv">2</span>:</span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"order must be exactly ['비율', '건수'] or ['건수', '비율']"</span>)</span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Step 1. 전체 교차표 생성 (비율, 건수) ===</span></span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a>    ratio <span class="op">=</span> df.groupby(group_col)[target_col].value_counts(normalize<span class="op">=</span><span class="va">True</span>).unstack()</span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> df.groupby(group_col)[target_col].value_counts(normalize<span class="op">=</span><span class="va">False</span>).unstack()</span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Step 2. 열 필터링 ===</span></span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> col_values <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>        ratio <span class="op">=</span> ratio.loc[:, ratio.columns.intersection(col_values)]</span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> count.loc[:, count.columns.intersection(col_values)]</span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Step 3. 열 이름 변경 ===</span></span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a>    ratio.columns <span class="op">=</span> [<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">_비율"</span> <span class="cf">for</span> col <span class="kw">in</span> ratio.columns]</span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a>    count.columns <span class="op">=</span> [<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">_건수"</span> <span class="cf">for</span> col <span class="kw">in</span> count.columns]</span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Step 4. 병합 ===</span></span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a>    merged <span class="op">=</span> pd.concat([ratio, count], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Step 5. 열 순서 재정렬 ===</span></span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a>    prefix_groups <span class="op">=</span> defaultdict(<span class="bu">dict</span>)</span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> merged.columns:</span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'_'</span> <span class="kw">in</span> col:</span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a>            prefix, suffix <span class="op">=</span> col.rsplit(<span class="st">'_'</span>, <span class="dv">1</span>)</span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>            prefix_groups[prefix][suffix] <span class="op">=</span> col</span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a>    ordered_cols <span class="op">=</span> []</span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> sort_mode <span class="op">==</span> <span class="st">'suffix-first'</span>:</span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> prefix <span class="kw">in</span> <span class="bu">sorted</span>(prefix_groups):</span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> suffix <span class="kw">in</span> order:</span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> suffix <span class="kw">in</span> prefix_groups[prefix]:</span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a>                    ordered_cols.append(prefix_groups[prefix][suffix])</span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> sort_mode <span class="op">==</span> <span class="st">'prefix-first'</span>:</span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> suffix <span class="kw">in</span> order:</span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> prefix <span class="kw">in</span> <span class="bu">sorted</span>(prefix_groups):</span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> suffix <span class="kw">in</span> prefix_groups[prefix]:</span>
<span id="cb64-64"><a href="#cb64-64" aria-hidden="true" tabindex="-1"></a>                    ordered_cols.append(prefix_groups[prefix][suffix])</span>
<span id="cb64-65"><a href="#cb64-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb64-66"><a href="#cb64-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"sort_mode must be 'suffix-first' or 'prefix-first'"</span>)</span>
<span id="cb64-67"><a href="#cb64-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-68"><a href="#cb64-68" aria-hidden="true" tabindex="-1"></a>    merged <span class="op">=</span> merged[ordered_cols]</span>
<span id="cb64-69"><a href="#cb64-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-70"><a href="#cb64-70" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Step 6. 행 필터링 ===</span></span>
<span id="cb64-71"><a href="#cb64-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> row_values <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb64-72"><a href="#cb64-72" aria-hidden="true" tabindex="-1"></a>        merged <span class="op">=</span> merged.loc[merged.index.intersection(row_values)]</span>
<span id="cb64-73"><a href="#cb64-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-74"><a href="#cb64-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> merged</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="2f3c3c5b-e812-469f-9f16-f343a67282fd" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 사용 예시</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>merged_ratio_count_table(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    df,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    group_col<span class="op">=</span><span class="st">'검사기관'</span>,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    target_col<span class="op">=</span><span class="st">'검사결과'</span>,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    row_values<span class="op">=</span>[</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(재)승강기안전기술연구원 서울지원"</span>,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"한국승강기안전공단 경기북부지사"</span>,</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"한국승강기안전공단 고양파주지사"</span>,</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"한국승강기안전공단 화성오산지사"</span>,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"한국승강기안전공단 대전지사"</span>,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"한국승강기안전공단 충북지사"</span>,</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"한국승강기안전공단 성남지사"</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    col_values<span class="op">=</span>[<span class="st">'합격'</span>, <span class="st">'조건부합격'</span>, <span class="st">'불합격'</span>, <span class="st">'보완후합격'</span>, <span class="st">'보완후불합격'</span>],</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    sort_mode<span class="op">=</span><span class="st">'prefix-first'</span>,</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>    order<span class="op">=</span>[<span class="st">'비율'</span>, <span class="st">'건수'</span>]</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">보완후불합격_비율</th>
<th data-quarto-table-cell-role="th">보완후합격_비율</th>
<th data-quarto-table-cell-role="th">불합격_비율</th>
<th data-quarto-table-cell-role="th">합격_비율</th>
<th data-quarto-table-cell-role="th">보완후불합격_건수</th>
<th data-quarto-table-cell-role="th">보완후합격_건수</th>
<th data-quarto-table-cell-role="th">불합격_건수</th>
<th data-quarto-table-cell-role="th">합격_건수</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">검사기관</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">(재)승강기안전기술연구원 서울지원</td>
<td>NaN</td>
<td>NaN</td>
<td>0.002644</td>
<td>0.396316</td>
<td>NaN</td>
<td>NaN</td>
<td>63.0</td>
<td>9445.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">한국승강기안전공단 경기북부지사</td>
<td>0.000079</td>
<td>0.009148</td>
<td>0.005165</td>
<td>0.210757</td>
<td>2.0</td>
<td>232.0</td>
<td>131.0</td>
<td>5345.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">한국승강기안전공단 고양파주지사</td>
<td>0.000248</td>
<td>0.012813</td>
<td>0.007549</td>
<td>0.286551</td>
<td>5.0</td>
<td>258.0</td>
<td>152.0</td>
<td>5770.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">한국승강기안전공단 대전지사</td>
<td>0.000110</td>
<td>0.015049</td>
<td>0.004888</td>
<td>0.426704</td>
<td>2.0</td>
<td>274.0</td>
<td>89.0</td>
<td>7769.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">한국승강기안전공단 성남지사</td>
<td>0.000118</td>
<td>0.009091</td>
<td>0.009209</td>
<td>0.384652</td>
<td>2.0</td>
<td>154.0</td>
<td>156.0</td>
<td>6516.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">한국승강기안전공단 충북지사</td>
<td>0.000058</td>
<td>0.012468</td>
<td>0.005277</td>
<td>0.437486</td>
<td>1.0</td>
<td>215.0</td>
<td>91.0</td>
<td>7544.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">한국승강기안전공단 화성오산지사</td>
<td>0.000415</td>
<td>0.022175</td>
<td>0.008182</td>
<td>0.303925</td>
<td>7.0</td>
<td>374.0</td>
<td>138.0</td>
<td>5126.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
</section>
<section id="data-전처리" class="level1">
<h1>3. Data 전처리</h1>
<section id="결측치-처리" class="level2">
<h2 class="anchored" data-anchor-id="결측치-처리">1. 결측치 처리</h2>
<ul>
<li>필요시 할 예정</li>
</ul>
</section>
<section id="이상치-처리" class="level2">
<h2 class="anchored" data-anchor-id="이상치-처리">2. 이상치 처리</h2>
<ul>
<li>필요시 할 예정</li>
</ul>
</section>
<section id="동일값-처리" class="level2">
<h2 class="anchored" data-anchor-id="동일값-처리">3. 동일값 처리</h2>
<div id="d314419b-9bdc-452f-a185-122427bec680" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'검사당시승강기형식'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>array(['권상식', '유압식', '스텝식', '유압식 ', '팔레트식', '가이드로프식', '마찰견인식', '포지티브식',
       '로프현수식', '스크류-너트식', '체인현수식', '벨트식', '체인식  ', '랙-피니언식', '체인식'],
      dtype=object)</code></pre>
</div>
</div>
<div id="525c9d5f-8267-40d9-b569-709a52335fd2" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'검사당시승강기형식'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>검사당시승강기형식
권상식        592885
스텝식         21961
유압식         14545
팔레트식         3789
스크류-너트식       492
가이드로프식        309
포지티브식         202
유압식           177
마찰견인식         130
로프현수식          86
벨트식            29
체인식            19
체인식             3
체인현수식           2
랙-피니언식          1
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="4412f62a-378a-47c1-b80c-158a41eca28c" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'검사당시승강기형식'</span>].<span class="bu">str</span>.strip().unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>array(['권상식', '유압식', '스텝식', '팔레트식', '가이드로프식', '마찰견인식', '포지티브식', '로프현수식',
       '스크류-너트식', '체인현수식', '벨트식', '체인식', '랙-피니언식'], dtype=object)</code></pre>
</div>
</div>
<div id="8f3f45b2-b56a-46a3-b50f-8383482ce650" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'검사당시승강기형식'</span>].<span class="bu">str</span>.strip().value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>검사당시승강기형식
권상식        592885
스텝식         21961
유압식         14722
팔레트식         3789
스크류-너트식       492
가이드로프식        309
포지티브식         202
마찰견인식         130
로프현수식          86
벨트식            29
체인식            22
체인현수식           2
랙-피니언식          1
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="4302997b-f4fb-42cb-933b-5733a71758be" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df['검사당시승강기형식'] = df['검사당시승강기형식'].str.strip()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="참고-자료" class="level1">
<h1>참고 자료</h1>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">1.</h2>
<p>승강기 형식은 구동 방식과 구조에 따라 다양한 형태로 나뉩니다. 아래는 각 형식에 대한 간단한 설명입니다:</p>
<ol type="1">
<li><p><strong>권상식</strong>: 전동기를 이용하여 와이어 로프를 감거나 풀어 승강기를 이동시키는 방식입니다. 주로 고층 건물에서 사용됩니다.</p></li>
<li><p><strong>유압식</strong>: 유압 실린더를 이용하여 승강기를 상승시키며, 중소형 건물에 적합합니다.</p></li>
<li><p><strong>스텝식</strong>: 일정한 간격으로 정지하는 방식으로, 주로 에스컬레이터나 무빙워크에 적용됩니다.</p></li>
<li><p><strong>팔레트식</strong>: 화물 운반용으로, 팔레트를 이용하여 물품을 승강시키는 방식입니다.</p></li>
<li><p><strong>가이드로프식</strong>: 승강기의 이동을 안내하는 로프를 사용하는 방식으로, 안정성을 높입니다.</p></li>
<li><p><strong>마찰견인식</strong>: 마찰력을 이용하여 로프를 견인하는 방식으로, 고층 건물에 적합합니다.</p></li>
<li><p><strong>포지티브식</strong>: 기계적인 연결을 통해 직접 승강기를 이동시키는 방식으로, 정확한 위치 제어가 가능합니다.</p></li>
<li><p><strong>로프현수식</strong>: 로프에 승강기를 매달아 이동시키는 방식으로, 일반적인 엘리베이터에서 사용됩니다.</p></li>
<li><p><strong>스크류-너트식</strong>: 스크류와 너트를 이용하여 승강기를 이동시키는 방식으로, 정밀한 제어가 가능합니다.</p></li>
<li><p><strong>체인현수식</strong>: 체인을 이용하여 승강기를 매달아 이동시키는 방식으로, 내구성이 높습니다.</p></li>
<li><p><strong>벨트식</strong>: 벨트를 이용하여 승강기를 이동시키는 방식으로, 소음이 적고 유지보수가 용이합니다.</p></li>
<li><p><strong>체인식</strong>: 체인을 이용하여 승강기를 이동시키는 방식으로, 강한 인장력을 제공합니다.</p></li>
<li><p><strong>랙-피니언식</strong>: 기어와 랙을 이용하여 승강기를 이동시키는 방식으로, 경사면에서도 사용 가능합니다.</p></li>
</ol>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">2.</h2>
<p>승강기의 세부 형식은 구동 방식, 설치 환경, 용도에 따라 다양하게 분류됩니다. 아래는 주어진 목록에 대한 간단한 설명입니다:</p>
<hr>
<blockquote class="blockquote">
<p>전기적 구동 방식</p>
</blockquote>
<ol type="1">
<li><p><strong>VVVF (Variable Voltage Variable Frequency)</strong> 전압과 주파수를 가변적으로 조절하여 모터의 속도와 토크를 제어하는 방식으로, 승강기의 부드러운 가속과 감속을 가능하게 하여 승차감을 향상시키고 에너지 효율성을 높입니다. </p></li>
<li><p><strong>교류 (AC)</strong> 교류 전원을 사용하는 모터로 구동되는 방식으로, 유지보수가 간편하고 비용 효율적이며, 현대 승강기에서 널리 사용됩니다.</p></li>
<li><p><strong>직류기어 (DC Geared)</strong> 기어박스를 통해 모터의 회전력을 전달하는 방식으로, 중저속 승강기에 적합하며, 유지보수가 필요합니다.</p></li>
<li><p><strong>직류무기어 (DC Gearless)</strong> 기어 없이 모터와 드라이브 풀리를 직접 연결하는 방식으로, 고속 운행이 가능하며, 고층 건물에 적합합니다. </p></li>
</ol>
<hr>
<blockquote class="blockquote">
<p>설치 환경 및 구조에 따른 분류</p>
</blockquote>
<ol start="5" type="1">
<li><p><strong>수직형 LIFT (4m 이하)</strong> 4미터 이하의 높이를 이동하는 리프트로, 주로 휠체어 사용자나 소형 화물 운반에 사용됩니다.</p></li>
<li><p><strong>수직형 LIFT (4m 초과)</strong> 4미터를 초과하는 높이를 이동하는 리프트로, 상업용 또는 산업용으로 사용되며, 안전성과 구조적 안정성이 중요합니다.</p></li>
<li><p><strong>경사형 LIFT</strong> 경사진 레일을 따라 이동하는 리프트로, 지형의 경사를 따라 설치되며, 주로 언덕이나 계단이 있는 장소에서 사용됩니다. </p></li>
</ol>
<hr>
<p>이러한 세부 형식은 건물의 구조, 용도, 사용자 요구사항에 따라 선택되며, 각각의 방식은 특정한 장점과 제한사항을 가지고 있습니다.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>